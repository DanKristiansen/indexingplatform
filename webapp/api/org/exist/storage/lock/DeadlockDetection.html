<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.5.0_22) on Mon Aug 15 20:51:07 CEST 2011 -->
<TITLE>
DeadlockDetection
</TITLE>

<META NAME="keywords" CONTENT="org.exist.storage.lock.DeadlockDetection class">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="DeadlockDetection";
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../../org/exist/storage/lock/FileLock.html" title="class in org.exist.storage.lock"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?org/exist/storage/lock/DeadlockDetection.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="DeadlockDetection.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.exist.storage.lock</FONT>
<BR>
Class DeadlockDetection</H2>
<PRE>
<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html" title="class or interface in java.lang">java.lang.Object</A>
  <IMG SRC="../../../../resources/inherit.gif" ALT="extended by "><B>org.exist.storage.lock.DeadlockDetection</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <B>DeadlockDetection</B><DT>extends <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html" title="class or interface in java.lang">Object</A></DL>
</PRE>

<P>
Deadlock detection for resource and collection locks. The static methods in this class
 keep track of all waiting threads, which are currently waiting on a resource or collection
 lock. In some scenarios (e.g. a complex XQuery which modifies resources), a single thread
 may acquire different read/write locks on resources in a collection. The locks can be arbitrarily
 nested. For example, a thread may first acquire a read lock on a collection, then a read lock on
 a resource and later acquires a write lock on the collection to remove the resource.

 Since we have locks on both, collections and resources, deadlock situations are sometimes
 unavoidable. For example, imagine the following scenario:

 <ul>
  <li>T1 owns write lock on resource</li>
  <li>T2 owns write lock on collection</li>
  <li>T2 wants to acquire write lock on resource locked by T1</li>
  <li>T1 tries to acquire write lock on collection currently locked by T2</li>
  <li>DEADLOCK</li>
 </ul>

 The code should probably be redesigned to avoid this kind of crossed collection-resource
 locking, which easily leads to circular wait conditions. However, this needs to be done with care. In
 the meantime, DeadlockDetection is used to detect deadlock situations as the one described
 above. The lock classes can
 then try to resolve the deadlock by suspending one thread.
<P>

<P>
<HR>

<P>

<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../org/exist/storage/lock/DeadlockDetection.html#DeadlockDetection()">DeadlockDetection</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exist/storage/lock/DeadlockDetection.html#addCollectionWaiter(java.lang.Thread, org.exist.storage.lock.Lock)">addCollectionWaiter</A></B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Thread.html" title="class or interface in java.lang">Thread</A>&nbsp;waiter,
                    <A HREF="../../../../org/exist/storage/lock/Lock.html" title="interface in org.exist.storage.lock">Lock</A>&nbsp;collectionLock)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Register a thread as waiting for a resource lock.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exist/storage/lock/DeadlockDetection.html#addResourceWaiter(java.lang.Thread, org.exist.storage.lock.WaitingThread)">addResourceWaiter</A></B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Thread.html" title="class or interface in java.lang">Thread</A>&nbsp;thread,
                  <A HREF="../../../../org/exist/storage/lock/WaitingThread.html" title="class in org.exist.storage.lock">WaitingThread</A>&nbsp;waiter)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Register a thread as waiting for a resource lock.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="../../../../org/exist/storage/lock/Lock.html" title="interface in org.exist.storage.lock">Lock</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exist/storage/lock/DeadlockDetection.html#clearCollectionWaiter(java.lang.Thread)">clearCollectionWaiter</A></B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Thread.html" title="class or interface in java.lang">Thread</A>&nbsp;waiter)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="../../../../org/exist/storage/lock/Lock.html" title="interface in org.exist.storage.lock">Lock</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exist/storage/lock/DeadlockDetection.html#clearResourceWaiter(java.lang.Thread)">clearResourceWaiter</A></B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Thread.html" title="class or interface in java.lang">Thread</A>&nbsp;thread)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Deregister a waiting thread.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="../../../../org/exist/storage/lock/WaitingThread.html" title="class in org.exist.storage.lock">WaitingThread</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exist/storage/lock/DeadlockDetection.html#deadlockCheckResource(java.lang.Thread, java.lang.Thread)">deadlockCheckResource</A></B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Thread.html" title="class or interface in java.lang">Thread</A>&nbsp;threadA,
                      <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Thread.html" title="class or interface in java.lang">Thread</A>&nbsp;threadB)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Check if there's a risk for a circular wait between threadA and threadB.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exist/storage/lock/DeadlockDetection.html#debug()">debug</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exist/storage/lock/DeadlockDetection.html#debug(java.io.PrintWriter, java.lang.String, org.exist.storage.lock.LockInfo)">debug</A></B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/io/PrintWriter.html" title="class or interface in java.io">PrintWriter</A>&nbsp;writer,
      <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/String.html" title="class or interface in java.lang">String</A>&nbsp;name,
      <A HREF="../../../../org/exist/storage/lock/LockInfo.html" title="class in org.exist.storage.lock">LockInfo</A>&nbsp;info)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exist/storage/lock/DeadlockDetection.html#debug(java.lang.String, org.exist.storage.lock.LockInfo)">debug</A></B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/String.html" title="class or interface in java.lang">String</A>&nbsp;name,
      <A HREF="../../../../org/exist/storage/lock/LockInfo.html" title="class in org.exist.storage.lock">LockInfo</A>&nbsp;info)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="http://java.sun.com/javase/6/docs/api/java/util/concurrent/locks/ReentrantLock.html" title="class or interface in java.util.concurrent.locks">ReentrantLock</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exist/storage/lock/DeadlockDetection.html#getLock()">getLock</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="../../../../org/exist/storage/lock/WaitingThread.html" title="class in org.exist.storage.lock">WaitingThread</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exist/storage/lock/DeadlockDetection.html#getResourceWaiter(java.lang.Thread)">getResourceWaiter</A></B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Thread.html" title="class or interface in java.lang">Thread</A>&nbsp;thread)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="http://java.sun.com/javase/6/docs/api/java/util/Map.html" title="class or interface in java.util">Map</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exist/storage/lock/DeadlockDetection.html#getWaitingThreads()">getWaitingThreads</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exist/storage/lock/DeadlockDetection.html#isBlockedBy(java.lang.Thread, java.lang.Thread)">isBlockedBy</A></B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Thread.html" title="class or interface in java.lang">Thread</A>&nbsp;threadA,
            <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Thread.html" title="class or interface in java.lang">Thread</A>&nbsp;threadB)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Check if the second thread is currently waiting for a resource lock and
 is blocked by the first thread.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="../../../../org/exist/storage/lock/Lock.html" title="interface in org.exist.storage.lock">Lock</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exist/storage/lock/DeadlockDetection.html#isWaitingFor(java.lang.Thread)">isWaitingFor</A></B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Thread.html" title="class or interface in java.lang">Thread</A>&nbsp;waiter)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exist/storage/lock/DeadlockDetection.html#wouldDeadlock(java.lang.Thread, java.lang.Thread, java.util.List)">wouldDeadlock</A></B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Thread.html" title="class or interface in java.lang">Thread</A>&nbsp;waiter,
              <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Thread.html" title="class or interface in java.lang">Thread</A>&nbsp;owner,
              <A HREF="http://java.sun.com/javase/6/docs/api/java/util/List.html" title="class or interface in java.util">List</A>&nbsp;waiters)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html" title="class or interface in java.lang">Object</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang">equals</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html#getClass()" title="class or interface in java.lang">getClass</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html#hashCode()" title="class or interface in java.lang">hashCode</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html#notify()" title="class or interface in java.lang">notify</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html#notifyAll()" title="class or interface in java.lang">notifyAll</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html#toString()" title="class or interface in java.lang">toString</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html#wait()" title="class or interface in java.lang">wait</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html#wait(long)" title="class or interface in java.lang">wait</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html#wait(long, int)" title="class or interface in java.lang">wait</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="DeadlockDetection()"><!-- --></A><H3>
DeadlockDetection</H3>
<PRE>
public <B>DeadlockDetection</B>()</PRE>
<DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="getLock()"><!-- --></A><H3>
getLock</H3>
<PRE>
public static <A HREF="http://java.sun.com/javase/6/docs/api/java/util/concurrent/locks/ReentrantLock.html" title="class or interface in java.util.concurrent.locks">ReentrantLock</A> <B>getLock</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="addResourceWaiter(java.lang.Thread, org.exist.storage.lock.WaitingThread)"><!-- --></A><H3>
addResourceWaiter</H3>
<PRE>
public static void <B>addResourceWaiter</B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Thread.html" title="class or interface in java.lang">Thread</A>&nbsp;thread,
                                     <A HREF="../../../../org/exist/storage/lock/WaitingThread.html" title="class in org.exist.storage.lock">WaitingThread</A>&nbsp;waiter)</PRE>
<DL>
<DD>Register a thread as waiting for a resource lock.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>thread</CODE> - the thread<DD><CODE>waiter</CODE> - the WaitingThread object which wraps around the thread</DL>
</DD>
</DL>
<HR>

<A NAME="clearResourceWaiter(java.lang.Thread)"><!-- --></A><H3>
clearResourceWaiter</H3>
<PRE>
public static <A HREF="../../../../org/exist/storage/lock/Lock.html" title="interface in org.exist.storage.lock">Lock</A> <B>clearResourceWaiter</B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Thread.html" title="class or interface in java.lang">Thread</A>&nbsp;thread)</PRE>
<DL>
<DD>Deregister a waiting thread.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>thread</CODE> - 
<DT><B>Returns:</B><DD>lock</DL>
</DD>
</DL>
<HR>

<A NAME="getResourceWaiter(java.lang.Thread)"><!-- --></A><H3>
getResourceWaiter</H3>
<PRE>
public static <A HREF="../../../../org/exist/storage/lock/WaitingThread.html" title="class in org.exist.storage.lock">WaitingThread</A> <B>getResourceWaiter</B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Thread.html" title="class or interface in java.lang">Thread</A>&nbsp;thread)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="deadlockCheckResource(java.lang.Thread, java.lang.Thread)"><!-- --></A><H3>
deadlockCheckResource</H3>
<PRE>
public static <A HREF="../../../../org/exist/storage/lock/WaitingThread.html" title="class in org.exist.storage.lock">WaitingThread</A> <B>deadlockCheckResource</B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Thread.html" title="class or interface in java.lang">Thread</A>&nbsp;threadA,
                                                  <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Thread.html" title="class or interface in java.lang">Thread</A>&nbsp;threadB)</PRE>
<DL>
<DD>Check if there's a risk for a circular wait between threadA and threadB. The method tests if
 threadB is currently waiting for a resource lock (read or write). It then checks
 if threadA holds a lock on this resource. If yes, the <A HREF="../../../../org/exist/storage/lock/WaitingThread.html" title="class in org.exist.storage.lock"><CODE>WaitingThread</CODE></A>
 object for threadB is returned. This object can be used to suspend the waiting thread
 in order to temporarily yield the lock to threadA.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>threadA</CODE> - <DD><CODE>threadB</CODE> - 
<DT><B>Returns:</B><DD>waiting thread</DL>
</DD>
</DL>
<HR>

<A NAME="isBlockedBy(java.lang.Thread, java.lang.Thread)"><!-- --></A><H3>
isBlockedBy</H3>
<PRE>
public static boolean <B>isBlockedBy</B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Thread.html" title="class or interface in java.lang">Thread</A>&nbsp;threadA,
                                  <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Thread.html" title="class or interface in java.lang">Thread</A>&nbsp;threadB)</PRE>
<DL>
<DD>Check if the second thread is currently waiting for a resource lock and
 is blocked by the first thread.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>threadA</CODE> - the thread whose lock might be blocking threadB<DD><CODE>threadB</CODE> - the thread to check
<DT><B>Returns:</B><DD>true if threadB is currently blocked by a lock held by threadA</DL>
</DD>
</DL>
<HR>

<A NAME="wouldDeadlock(java.lang.Thread, java.lang.Thread, java.util.List)"><!-- --></A><H3>
wouldDeadlock</H3>
<PRE>
public static boolean <B>wouldDeadlock</B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Thread.html" title="class or interface in java.lang">Thread</A>&nbsp;waiter,
                                    <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Thread.html" title="class or interface in java.lang">Thread</A>&nbsp;owner,
                                    <A HREF="http://java.sun.com/javase/6/docs/api/java/util/List.html" title="class or interface in java.util">List</A>&nbsp;waiters)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="addCollectionWaiter(java.lang.Thread, org.exist.storage.lock.Lock)"><!-- --></A><H3>
addCollectionWaiter</H3>
<PRE>
public static void <B>addCollectionWaiter</B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Thread.html" title="class or interface in java.lang">Thread</A>&nbsp;waiter,
                                       <A HREF="../../../../org/exist/storage/lock/Lock.html" title="interface in org.exist.storage.lock">Lock</A>&nbsp;collectionLock)</PRE>
<DL>
<DD>Register a thread as waiting for a resource lock.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>waiter</CODE> - the thread<DD><CODE>lock</CODE> - the lock object</DL>
</DD>
</DL>
<HR>

<A NAME="clearCollectionWaiter(java.lang.Thread)"><!-- --></A><H3>
clearCollectionWaiter</H3>
<PRE>
public static <A HREF="../../../../org/exist/storage/lock/Lock.html" title="interface in org.exist.storage.lock">Lock</A> <B>clearCollectionWaiter</B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Thread.html" title="class or interface in java.lang">Thread</A>&nbsp;waiter)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="isWaitingFor(java.lang.Thread)"><!-- --></A><H3>
isWaitingFor</H3>
<PRE>
public static <A HREF="../../../../org/exist/storage/lock/Lock.html" title="interface in org.exist.storage.lock">Lock</A> <B>isWaitingFor</B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Thread.html" title="class or interface in java.lang">Thread</A>&nbsp;waiter)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getWaitingThreads()"><!-- --></A><H3>
getWaitingThreads</H3>
<PRE>
public static <A HREF="http://java.sun.com/javase/6/docs/api/java/util/Map.html" title="class or interface in java.util">Map</A> <B>getWaitingThreads</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="debug(java.lang.String, org.exist.storage.lock.LockInfo)"><!-- --></A><H3>
debug</H3>
<PRE>
public static void <B>debug</B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/String.html" title="class or interface in java.lang">String</A>&nbsp;name,
                         <A HREF="../../../../org/exist/storage/lock/LockInfo.html" title="class in org.exist.storage.lock">LockInfo</A>&nbsp;info)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="debug(java.io.PrintWriter, java.lang.String, org.exist.storage.lock.LockInfo)"><!-- --></A><H3>
debug</H3>
<PRE>
public static void <B>debug</B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/io/PrintWriter.html" title="class or interface in java.io">PrintWriter</A>&nbsp;writer,
                         <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/String.html" title="class or interface in java.lang">String</A>&nbsp;name,
                         <A HREF="../../../../org/exist/storage/lock/LockInfo.html" title="class in org.exist.storage.lock">LockInfo</A>&nbsp;info)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="debug()"><!-- --></A><H3>
debug</H3>
<PRE>
public static void <B>debug</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../../org/exist/storage/lock/FileLock.html" title="class in org.exist.storage.lock"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?org/exist/storage/lock/DeadlockDetection.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="DeadlockDetection.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright (C) Wolfgang Meier. All rights reserved.
</BODY>
</HTML>
