<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.5.0_22) on Mon Aug 15 20:51:01 CEST 2011 -->
<TITLE>
XQueryTrigger
</TITLE>

<META NAME="keywords" CONTENT="org.exist.collections.triggers.XQueryTrigger class">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="XQueryTrigger";
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/exist/collections/triggers/TriggerStatePerThread.TriggerState.html" title="class in org.exist.collections.triggers"><B>PREV CLASS</B></A>&nbsp;
&nbsp;NEXT CLASS</FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?org/exist/collections/triggers/XQueryTrigger.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="XQueryTrigger.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.exist.collections.triggers</FONT>
<BR>
Class XQueryTrigger</H2>
<PRE>
<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html" title="class or interface in java.lang">java.lang.Object</A>
  <IMG SRC="../../../../resources/inherit.gif" ALT="extended by "><A HREF="../../../../org/exist/collections/triggers/FilteringTrigger.html" title="class in org.exist.collections.triggers">org.exist.collections.triggers.FilteringTrigger</A>
      <IMG SRC="../../../../resources/inherit.gif" ALT="extended by "><B>org.exist.collections.triggers.XQueryTrigger</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD><A HREF="../../../../org/exist/collections/triggers/DocumentTrigger.html" title="interface in org.exist.collections.triggers">DocumentTrigger</A>, <A HREF="../../../../org/exist/collections/triggers/Trigger.html" title="interface in org.exist.collections.triggers">Trigger</A>, <A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ContentHandler.html" title="class or interface in org.xml.sax">ContentHandler</A>, <A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ext/LexicalHandler.html" title="class or interface in org.xml.sax.ext">LexicalHandler</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public class <B>XQueryTrigger</B><DT>extends <A HREF="../../../../org/exist/collections/triggers/FilteringTrigger.html" title="class in org.exist.collections.triggers">FilteringTrigger</A></DL>
</PRE>

<P>
A trigger that executes a user XQuery statement when invoked.
 
 The XQuery source executed is the value of the parameter named "query" or the
 query at the URL indicated by the parameter named "url".
 
 Any additional parameters will be declared as external variables with the type xs:string
 
 These external variables for the Trigger are accessible to the user XQuery statement
 <code>xxx:eventType</code> : the type of event for the Trigger. Either "prepare" or "finish"
 <code>xxx:collectionName</code> : the name of the collection from which the event is triggered
 <code>xxx:documentName</code> : the name of the document from which the event is triggered
 <code>xxx:triggerEvent</code> : the kind of triggered event
 <code>xxx:document</code> : the document from which the event is triggered
 xxx is the namespace prefix within the XQuery, can be set by the variable "bindingPrefix"
<P>

<P>
<DL>
<DT><B>Author:</B></DT>
  <DD>Pierrick Brihaye <pierrick.brihaye@free.fr>, Adam Retter <adam.retter@devon.gov.uk></DD>
</DL>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/String.html" title="class or interface in java.lang">String</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exist/collections/triggers/XQueryTrigger.html#PEPARE_EXCEIPTION_MESSAGE">PEPARE_EXCEIPTION_MESSAGE</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;<A NAME="fields_inherited_from_class_org.exist.collections.triggers.Trigger"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Fields inherited from interface org.exist.collections.triggers.<A HREF="../../../../org/exist/collections/triggers/Trigger.html" title="interface in org.exist.collections.triggers">Trigger</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../../org/exist/collections/triggers/Trigger.html#CREATE_COLLECTION_EVENT">CREATE_COLLECTION_EVENT</A>, <A HREF="../../../../org/exist/collections/triggers/Trigger.html#DELETE_COLLECTION_EVENT">DELETE_COLLECTION_EVENT</A>, <A HREF="../../../../org/exist/collections/triggers/Trigger.html#REMOVE_DOCUMENT_EVENT">REMOVE_DOCUMENT_EVENT</A>, <A HREF="../../../../org/exist/collections/triggers/Trigger.html#RENAME_COLLECTION_EVENT">RENAME_COLLECTION_EVENT</A>, <A HREF="../../../../org/exist/collections/triggers/Trigger.html#STORE_DOCUMENT_EVENT">STORE_DOCUMENT_EVENT</A>, <A HREF="../../../../org/exist/collections/triggers/Trigger.html#UPDATE_DOCUMENT_EVENT">UPDATE_DOCUMENT_EVENT</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../org/exist/collections/triggers/XQueryTrigger.html#XQueryTrigger()">XQueryTrigger</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exist/collections/triggers/XQueryTrigger.html#configure(org.exist.storage.DBBroker, org.exist.collections.Collection, java.util.Map)">configure</A></B>(<A HREF="../../../../org/exist/storage/DBBroker.html" title="class in org.exist.storage">DBBroker</A>&nbsp;broker,
          <A HREF="../../../../org/exist/collections/Collection.html" title="class in org.exist.collections">Collection</A>&nbsp;parent,
          <A HREF="http://java.sun.com/javase/6/docs/api/java/util/Map.html" title="class or interface in java.util">Map</A>&nbsp;parameters)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Configure the trigger.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exist/collections/triggers/XQueryTrigger.html#endDocument()">endDocument</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/String.html" title="class or interface in java.lang">String</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exist/collections/triggers/XQueryTrigger.html#eventToString(int)">eventToString</A></B>(int&nbsp;event)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns a String representation of the Trigger event</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exist/collections/triggers/XQueryTrigger.html#finish(int, org.exist.storage.DBBroker, org.exist.storage.txn.Txn, org.exist.xmldb.XmldbURI, org.exist.dom.DocumentImpl)">finish</A></B>(int&nbsp;event,
       <A HREF="../../../../org/exist/storage/DBBroker.html" title="class in org.exist.storage">DBBroker</A>&nbsp;broker,
       <A HREF="../../../../org/exist/storage/txn/Txn.html" title="class in org.exist.storage.txn">Txn</A>&nbsp;transaction,
       <A HREF="../../../../org/exist/xmldb/XmldbURI.html" title="class in org.exist.xmldb">XmldbURI</A>&nbsp;documentPath,
       <A HREF="../../../../org/exist/dom/DocumentImpl.html" title="class in org.exist.dom">DocumentImpl</A>&nbsp;document)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method is called after the operation completed.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exist/collections/triggers/XQueryTrigger.html#prepare(int, org.exist.storage.DBBroker, org.exist.storage.txn.Txn, org.exist.xmldb.XmldbURI, org.exist.dom.DocumentImpl)">prepare</A></B>(int&nbsp;event,
        <A HREF="../../../../org/exist/storage/DBBroker.html" title="class in org.exist.storage">DBBroker</A>&nbsp;broker,
        <A HREF="../../../../org/exist/storage/txn/Txn.html" title="class in org.exist.storage.txn">Txn</A>&nbsp;transaction,
        <A HREF="../../../../org/exist/xmldb/XmldbURI.html" title="class in org.exist.xmldb">XmldbURI</A>&nbsp;documentPath,
        <A HREF="../../../../org/exist/dom/DocumentImpl.html" title="class in org.exist.dom">DocumentImpl</A>&nbsp;existingDocument)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method is called once before the database will actually parse the input data.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exist/collections/triggers/XQueryTrigger.html#startDocument()">startDocument</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_org.exist.collections.triggers.FilteringTrigger"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class org.exist.collections.triggers.<A HREF="../../../../org/exist/collections/triggers/FilteringTrigger.html" title="class in org.exist.collections.triggers">FilteringTrigger</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../../org/exist/collections/triggers/FilteringTrigger.html#characters(char[], int, int)">characters</A>, <A HREF="../../../../org/exist/collections/triggers/FilteringTrigger.html#comment(char[], int, int)">comment</A>, <A HREF="../../../../org/exist/collections/triggers/FilteringTrigger.html#endCDATA()">endCDATA</A>, <A HREF="../../../../org/exist/collections/triggers/FilteringTrigger.html#endDTD()">endDTD</A>, <A HREF="../../../../org/exist/collections/triggers/FilteringTrigger.html#endElement(java.lang.String, java.lang.String, java.lang.String)">endElement</A>, <A HREF="../../../../org/exist/collections/triggers/FilteringTrigger.html#endEntity(java.lang.String)">endEntity</A>, <A HREF="../../../../org/exist/collections/triggers/FilteringTrigger.html#endPrefixMapping(java.lang.String)">endPrefixMapping</A>, <A HREF="../../../../org/exist/collections/triggers/FilteringTrigger.html#getCollection()">getCollection</A>, <A HREF="../../../../org/exist/collections/triggers/FilteringTrigger.html#getInputHandler()">getInputHandler</A>, <A HREF="../../../../org/exist/collections/triggers/FilteringTrigger.html#getLexicalInputHandler()">getLexicalInputHandler</A>, <A HREF="../../../../org/exist/collections/triggers/FilteringTrigger.html#getLexicalOutputHandler()">getLexicalOutputHandler</A>, <A HREF="../../../../org/exist/collections/triggers/FilteringTrigger.html#getLogger()">getLogger</A>, <A HREF="../../../../org/exist/collections/triggers/FilteringTrigger.html#getOutputHandler()">getOutputHandler</A>, <A HREF="../../../../org/exist/collections/triggers/FilteringTrigger.html#ignorableWhitespace(char[], int, int)">ignorableWhitespace</A>, <A HREF="../../../../org/exist/collections/triggers/FilteringTrigger.html#isValidating()">isValidating</A>, <A HREF="../../../../org/exist/collections/triggers/FilteringTrigger.html#processingInstruction(java.lang.String, java.lang.String)">processingInstruction</A>, <A HREF="../../../../org/exist/collections/triggers/FilteringTrigger.html#setDocumentLocator(org.xml.sax.Locator)">setDocumentLocator</A>, <A HREF="../../../../org/exist/collections/triggers/FilteringTrigger.html#setLexicalOutputHandler(org.xml.sax.ext.LexicalHandler)">setLexicalOutputHandler</A>, <A HREF="../../../../org/exist/collections/triggers/FilteringTrigger.html#setOutputHandler(org.xml.sax.ContentHandler)">setOutputHandler</A>, <A HREF="../../../../org/exist/collections/triggers/FilteringTrigger.html#setValidating(boolean)">setValidating</A>, <A HREF="../../../../org/exist/collections/triggers/FilteringTrigger.html#skippedEntity(java.lang.String)">skippedEntity</A>, <A HREF="../../../../org/exist/collections/triggers/FilteringTrigger.html#startCDATA()">startCDATA</A>, <A HREF="../../../../org/exist/collections/triggers/FilteringTrigger.html#startDTD(java.lang.String, java.lang.String, java.lang.String)">startDTD</A>, <A HREF="../../../../org/exist/collections/triggers/FilteringTrigger.html#startElement(java.lang.String, java.lang.String, java.lang.String, org.xml.sax.Attributes)">startElement</A>, <A HREF="../../../../org/exist/collections/triggers/FilteringTrigger.html#startEntity(java.lang.String)">startEntity</A>, <A HREF="../../../../org/exist/collections/triggers/FilteringTrigger.html#startPrefixMapping(java.lang.String, java.lang.String)">startPrefixMapping</A></CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html" title="class or interface in java.lang">Object</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang">equals</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html#getClass()" title="class or interface in java.lang">getClass</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html#hashCode()" title="class or interface in java.lang">hashCode</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html#notify()" title="class or interface in java.lang">notify</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html#notifyAll()" title="class or interface in java.lang">notifyAll</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html#toString()" title="class or interface in java.lang">toString</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html#wait()" title="class or interface in java.lang">wait</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html#wait(long)" title="class or interface in java.lang">wait</A>, <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/Object.html#wait(long, int)" title="class or interface in java.lang">wait</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="PEPARE_EXCEIPTION_MESSAGE"><!-- --></A><H3>
PEPARE_EXCEIPTION_MESSAGE</H3>
<PRE>
public static final <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/String.html" title="class or interface in java.lang">String</A> <B>PEPARE_EXCEIPTION_MESSAGE</B></PRE>
<DL>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#org.exist.collections.triggers.XQueryTrigger.PEPARE_EXCEIPTION_MESSAGE">Constant Field Values</A></DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="XQueryTrigger()"><!-- --></A><H3>
XQueryTrigger</H3>
<PRE>
public <B>XQueryTrigger</B>()</PRE>
<DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="configure(org.exist.storage.DBBroker, org.exist.collections.Collection, java.util.Map)"><!-- --></A><H3>
configure</H3>
<PRE>
public void <B>configure</B>(<A HREF="../../../../org/exist/storage/DBBroker.html" title="class in org.exist.storage">DBBroker</A>&nbsp;broker,
                      <A HREF="../../../../org/exist/collections/Collection.html" title="class in org.exist.collections">Collection</A>&nbsp;parent,
                      <A HREF="http://java.sun.com/javase/6/docs/api/java/util/Map.html" title="class or interface in java.util">Map</A>&nbsp;parameters)
               throws <A HREF="../../../../org/exist/collections/CollectionConfigurationException.html" title="class in org.exist.collections">CollectionConfigurationException</A></PRE>
<DL>
<DD><B>Description copied from class: <CODE><A HREF="../../../../org/exist/collections/triggers/FilteringTrigger.html#configure(org.exist.storage.DBBroker, org.exist.collections.Collection, java.util.Map)">FilteringTrigger</A></CODE></B></DD>
<DD>Configure the trigger. The default implementation just stores the parent collection
 reference into the field <A HREF="../../../../org/exist/collections/triggers/FilteringTrigger.html#collection"><CODE>collection</CODE></A>. Use method <A HREF="../../../../org/exist/collections/triggers/FilteringTrigger.html#getCollection()"><CODE>getCollection</CODE></A>
 to later retrieve the collection.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../org/exist/collections/triggers/Trigger.html#configure(org.exist.storage.DBBroker, org.exist.collections.Collection, java.util.Map)">configure</A></CODE> in interface <CODE><A HREF="../../../../org/exist/collections/triggers/Trigger.html" title="interface in org.exist.collections.triggers">Trigger</A></CODE><DT><B>Overrides:</B><DD><CODE><A HREF="../../../../org/exist/collections/triggers/FilteringTrigger.html#configure(org.exist.storage.DBBroker, org.exist.collections.Collection, java.util.Map)">configure</A></CODE> in class <CODE><A HREF="../../../../org/exist/collections/triggers/FilteringTrigger.html" title="class in org.exist.collections.triggers">FilteringTrigger</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>broker</CODE> - the database instance used to load the collection configuration. The broker object is
        required for all database actions. Please note: the broker instance used for configuration is probably
        different from the one passed to the prepare method. Don't store the broker object in your class.<DD><CODE>parent</CODE> - the collection to which this trigger belongs.<DD><CODE>parameters</CODE> - a Map containing any key/value parameters defined in the configuration file.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../org/exist/collections/CollectionConfigurationException.html" title="class in org.exist.collections">CollectionConfigurationException</A></CODE> - if the trigger cannot be initialized.</DL>
</DD>
</DL>
<HR>

<A NAME="prepare(int, org.exist.storage.DBBroker, org.exist.storage.txn.Txn, org.exist.xmldb.XmldbURI, org.exist.dom.DocumentImpl)"><!-- --></A><H3>
prepare</H3>
<PRE>
public void <B>prepare</B>(int&nbsp;event,
                    <A HREF="../../../../org/exist/storage/DBBroker.html" title="class in org.exist.storage">DBBroker</A>&nbsp;broker,
                    <A HREF="../../../../org/exist/storage/txn/Txn.html" title="class in org.exist.storage.txn">Txn</A>&nbsp;transaction,
                    <A HREF="../../../../org/exist/xmldb/XmldbURI.html" title="class in org.exist.xmldb">XmldbURI</A>&nbsp;documentPath,
                    <A HREF="../../../../org/exist/dom/DocumentImpl.html" title="class in org.exist.dom">DocumentImpl</A>&nbsp;existingDocument)
             throws <A HREF="../../../../org/exist/collections/triggers/TriggerException.html" title="class in org.exist.collections.triggers">TriggerException</A></PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../../org/exist/collections/triggers/DocumentTrigger.html#prepare(int, org.exist.storage.DBBroker, org.exist.storage.txn.Txn, org.exist.xmldb.XmldbURI, org.exist.dom.DocumentImpl)">DocumentTrigger</A></CODE></B></DD>
<DD>This method is called once before the database will actually parse the input data. You may take any action
 here, using the supplied broker instance.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>event</CODE> - the type of event that triggered this call (see the constants defined in this interface). The ContentHandler instance for the output.<DD><CODE>broker</CODE> - the database instance used to process the current action.<DD><CODE>transaction</CODE> - the current transaction context<DD><CODE>documentPath</CODE> - the full absolute path of the document currently processed.<DD><CODE>existingDocument</CODE> - optional: if event is a <A HREF="../../../../org/exist/collections/triggers/Trigger.html#UPDATE_DOCUMENT_EVENT"><CODE>Trigger.UPDATE_DOCUMENT_EVENT</CODE></A>,
  existingDocument will contain the Document object for the old document, which will be overwritten. Otherwise, the parameter
  is null.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../org/exist/collections/triggers/TriggerException.html" title="class in org.exist.collections.triggers">TriggerException</A></CODE> - throwing a TriggerException will abort the current action.</DL>
</DD>
</DL>
<HR>

<A NAME="finish(int, org.exist.storage.DBBroker, org.exist.storage.txn.Txn, org.exist.xmldb.XmldbURI, org.exist.dom.DocumentImpl)"><!-- --></A><H3>
finish</H3>
<PRE>
public void <B>finish</B>(int&nbsp;event,
                   <A HREF="../../../../org/exist/storage/DBBroker.html" title="class in org.exist.storage">DBBroker</A>&nbsp;broker,
                   <A HREF="../../../../org/exist/storage/txn/Txn.html" title="class in org.exist.storage.txn">Txn</A>&nbsp;transaction,
                   <A HREF="../../../../org/exist/xmldb/XmldbURI.html" title="class in org.exist.xmldb">XmldbURI</A>&nbsp;documentPath,
                   <A HREF="../../../../org/exist/dom/DocumentImpl.html" title="class in org.exist.dom">DocumentImpl</A>&nbsp;document)</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../../org/exist/collections/triggers/DocumentTrigger.html#finish(int, org.exist.storage.DBBroker, org.exist.storage.txn.Txn, org.exist.xmldb.XmldbURI, org.exist.dom.DocumentImpl)">DocumentTrigger</A></CODE></B></DD>
<DD>This method is called after the operation completed. At this point, the document has already
 been stored.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>event</CODE> - the type of event that triggered this call (see the constants defined in this interface).<DD><CODE>broker</CODE> - the database instance used to process the current action.<DD><CODE>transaction</CODE> - the current transaction context<DD><CODE>documentPath</CODE> - the path of the document, if removed the old path of the document<DD><CODE>document</CODE> - the stored document or null if the document is removed</DL>
</DD>
</DL>
<HR>

<A NAME="startDocument()"><!-- --></A><H3>
startDocument</H3>
<PRE>
public void <B>startDocument</B>()
                   throws <A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/SAXException.html" title="class or interface in org.xml.sax">SAXException</A></PRE>
<DL>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ContentHandler.html#startDocument()" title="class or interface in org.xml.sax">startDocument</A></CODE> in interface <CODE><A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ContentHandler.html" title="class or interface in org.xml.sax">ContentHandler</A></CODE><DT><B>Overrides:</B><DD><CODE><A HREF="../../../../org/exist/collections/triggers/FilteringTrigger.html#startDocument()">startDocument</A></CODE> in class <CODE><A HREF="../../../../org/exist/collections/triggers/FilteringTrigger.html" title="class in org.exist.collections.triggers">FilteringTrigger</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/SAXException.html" title="class or interface in org.xml.sax">SAXException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="endDocument()"><!-- --></A><H3>
endDocument</H3>
<PRE>
public void <B>endDocument</B>()
                 throws <A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/SAXException.html" title="class or interface in org.xml.sax">SAXException</A></PRE>
<DL>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ContentHandler.html#endDocument()" title="class or interface in org.xml.sax">endDocument</A></CODE> in interface <CODE><A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ContentHandler.html" title="class or interface in org.xml.sax">ContentHandler</A></CODE><DT><B>Overrides:</B><DD><CODE><A HREF="../../../../org/exist/collections/triggers/FilteringTrigger.html#endDocument()">endDocument</A></CODE> in class <CODE><A HREF="../../../../org/exist/collections/triggers/FilteringTrigger.html" title="class in org.exist.collections.triggers">FilteringTrigger</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/SAXException.html" title="class or interface in org.xml.sax">SAXException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="eventToString(int)"><!-- --></A><H3>
eventToString</H3>
<PRE>
public static <A HREF="http://java.sun.com/javase/6/docs/api/java/lang/String.html" title="class or interface in java.lang">String</A> <B>eventToString</B>(int&nbsp;event)</PRE>
<DL>
<DD>Returns a String representation of the Trigger event
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>event</CODE> - The Trigger event
<DT><B>Returns:</B><DD>The String representation</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/exist/collections/triggers/TriggerStatePerThread.TriggerState.html" title="class in org.exist.collections.triggers"><B>PREV CLASS</B></A>&nbsp;
&nbsp;NEXT CLASS</FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?org/exist/collections/triggers/XQueryTrigger.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="XQueryTrigger.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright (C) Wolfgang Meier. All rights reserved.
</BODY>
</HTML>
