<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.5.0_22) on Mon Aug 15 20:51:01 CEST 2011 -->
<TITLE>
DocumentTrigger
</TITLE>

<META NAME="keywords" CONTENT="org.exist.collections.triggers.DocumentTrigger interface">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="DocumentTrigger";
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/exist/collections/triggers/CollectionTrigger.html" title="interface in org.exist.collections.triggers"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../org/exist/collections/triggers/Dumper.html" title="class in org.exist.collections.triggers"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?org/exist/collections/triggers/DocumentTrigger.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="DocumentTrigger.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.exist.collections.triggers</FONT>
<BR>
Interface DocumentTrigger</H2>
<DL>
<DT><B>All Superinterfaces:</B> <DD><A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ContentHandler.html" title="class or interface in org.xml.sax">ContentHandler</A>, <A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ext/LexicalHandler.html" title="class or interface in org.xml.sax.ext">LexicalHandler</A>, <A HREF="../../../../org/exist/collections/triggers/Trigger.html" title="interface in org.exist.collections.triggers">Trigger</A></DD>
</DL>
<DL>
<DT><B>All Known Implementing Classes:</B> <DD><A HREF="../../../../org/exist/collections/triggers/Dumper.html" title="class in org.exist.collections.triggers">Dumper</A>, <A HREF="../../../../org/exist/collections/triggers/FilteringTrigger.html" title="class in org.exist.collections.triggers">FilteringTrigger</A>, <A HREF="../../../../org/exist/collections/triggers/HistoryTrigger.html" title="class in org.exist.collections.triggers">HistoryTrigger</A>, <A HREF="../../../../org/exist/collections/triggers/STXTransformerTrigger.html" title="class in org.exist.collections.triggers">STXTransformerTrigger</A>, <A HREF="../../../../org/exist/collections/triggers/XQueryTrigger.html" title="class in org.exist.collections.triggers">XQueryTrigger</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public interface <B>DocumentTrigger</B><DT>extends <A HREF="../../../../org/exist/collections/triggers/Trigger.html" title="interface in org.exist.collections.triggers">Trigger</A>, <A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ContentHandler.html" title="class or interface in org.xml.sax">ContentHandler</A>, <A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ext/LexicalHandler.html" title="class or interface in org.xml.sax.ext">LexicalHandler</A></DL>
</PRE>

<P>
Interface for triggers that react to document-related events.
 
 Document triggers may have two roles:
 
 <ol>
  <li>before the document is stored, updated or removed, the trigger's <A HREF="../../../../org/exist/collections/triggers/DocumentTrigger.html#prepare(int, org.exist.storage.DBBroker, org.exist.storage.txn.Txn, org.exist.xmldb.XmldbURI, org.exist.dom.DocumentImpl)"><CODE>prepare</CODE></A> 
  method is called. The trigger code may take any action desired, for example, to ensure referential
  integrity on the database, issue XUpdate commands on other documents in the database...</li>
  <li>the trigger also functions as a filter: the trigger interface extends SAX <A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ContentHandler.html" title="class or interface in org.xml.sax"><CODE>content handler</CODE></A> and
  <A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ext/LexicalHandler.html" title="class or interface in org.xml.sax.ext"><CODE>lexical handler</CODE></A>. It will thus receive any SAX events generated by the SAX parser. The default
  implementation just forwards the SAX events to the indexer, i.e. the output content handler. However,
  a trigger may also alter the received SAX events before it forwards them to the indexer, for example,
  by applying a stylesheet.</li>
 </ol>
 
 The DocumentTrigger interface is also called for binary resources. However, in this case, the trigger can not function as
 a filter and the SAX-related methods are useless. Only <A HREF="../../../../org/exist/collections/triggers/DocumentTrigger.html#prepare(int, org.exist.storage.DBBroker, org.exist.storage.txn.Txn, org.exist.xmldb.XmldbURI, org.exist.dom.DocumentImpl)"><CODE>prepare(int, DBBroker, Txn, XmldbURI, DocumentImpl)</CODE></A> and
 <A HREF="../../../../org/exist/collections/triggers/DocumentTrigger.html#finish(int, org.exist.storage.DBBroker, org.exist.storage.txn.Txn, org.exist.xmldb.XmldbURI, org.exist.dom.DocumentImpl)"><CODE>finish(int, DBBroker, Txn, XmldbURI, DocumentImpl)</CODE></A> will be called. To determine if the document is a binary resource,
 call <A HREF="../../../../org/exist/dom/DocumentImpl.html#getResourceType()"><CODE>DocumentImpl.getResourceType()</CODE></A>.
 
 The general contract for a trigger is as follows:
 
 <ol>
  <li>configuration phase: whenever the collection loads its configuration file, the trigger's 
  <A HREF="../../../../org/exist/collections/triggers/Trigger.html#configure(org.exist.storage.DBBroker, org.exist.collections.Collection, java.util.Map)"><CODE>configure</CODE></A> method
  will be called once.</li>
  <li>pre-parse phase: before parsing the source document, the collection will call the trigger's
  <A HREF="../../../../org/exist/collections/triggers/DocumentTrigger.html#prepare(int, org.exist.storage.DBBroker, org.exist.storage.txn.Txn, org.exist.xmldb.XmldbURI, org.exist.dom.DocumentImpl)"><CODE>prepare</CODE></A> 
  method once for each document to be stored, removed or updated. The trigger may
  throw a TriggerException if the current action should be aborted.</li>
  <li>validation phase: during the validation phase, the document is parsed once by the SAX parser. During this
  phase, the trigger may decide to throw a SAXException to report a problem. Validation will fail and the action
  is aborted.</li>
  <li>storage phase: the document is again parsed by the SAX parser. The trigger will still receive all SAX events,
  but it is not allowed to throw an exception. Throwing an exception during the storage phase will result in an
  invalid document in the database. Use <A HREF="../../../../org/exist/collections/triggers/DocumentTrigger.html#isValidating()"><CODE>isValidating</CODE></A> in your code to check that you're
  in validation phase.</li>
  <li>finalization: the method <A HREF="../../../../org/exist/collections/triggers/DocumentTrigger.html#finish(int, org.exist.storage.DBBroker, org.exist.storage.txn.Txn, org.exist.xmldb.XmldbURI, org.exist.dom.DocumentImpl)"><CODE>finish(int, DBBroker, Txn, XmldbURI, DocumentImpl)</CODE></A> is called. At this point, the document
  has already been stored and is ready to be used or - for <A HREF="../../../../org/exist/collections/triggers/Trigger.html#REMOVE_DOCUMENT_EVENT"><CODE>Trigger.REMOVE_DOCUMENT_EVENT</CODE></A> - has been removed.
  </li>
 </ol>
<P>

<P>
<DL>
<DT><B>Author:</B></DT>
  <DD>wolf</DD>
</DL>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
</TABLE>
&nbsp;<A NAME="fields_inherited_from_class_org.exist.collections.triggers.Trigger"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Fields inherited from interface org.exist.collections.triggers.<A HREF="../../../../org/exist/collections/triggers/Trigger.html" title="interface in org.exist.collections.triggers">Trigger</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../../org/exist/collections/triggers/Trigger.html#CREATE_COLLECTION_EVENT">CREATE_COLLECTION_EVENT</A>, <A HREF="../../../../org/exist/collections/triggers/Trigger.html#DELETE_COLLECTION_EVENT">DELETE_COLLECTION_EVENT</A>, <A HREF="../../../../org/exist/collections/triggers/Trigger.html#REMOVE_DOCUMENT_EVENT">REMOVE_DOCUMENT_EVENT</A>, <A HREF="../../../../org/exist/collections/triggers/Trigger.html#RENAME_COLLECTION_EVENT">RENAME_COLLECTION_EVENT</A>, <A HREF="../../../../org/exist/collections/triggers/Trigger.html#STORE_DOCUMENT_EVENT">STORE_DOCUMENT_EVENT</A>, <A HREF="../../../../org/exist/collections/triggers/Trigger.html#UPDATE_DOCUMENT_EVENT">UPDATE_DOCUMENT_EVENT</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exist/collections/triggers/DocumentTrigger.html#finish(int, org.exist.storage.DBBroker, org.exist.storage.txn.Txn, org.exist.xmldb.XmldbURI, org.exist.dom.DocumentImpl)">finish</A></B>(int&nbsp;event,
       <A HREF="../../../../org/exist/storage/DBBroker.html" title="class in org.exist.storage">DBBroker</A>&nbsp;broker,
       <A HREF="../../../../org/exist/storage/txn/Txn.html" title="class in org.exist.storage.txn">Txn</A>&nbsp;transaction,
       <A HREF="../../../../org/exist/xmldb/XmldbURI.html" title="class in org.exist.xmldb">XmldbURI</A>&nbsp;documentPath,
       <A HREF="../../../../org/exist/dom/DocumentImpl.html" title="class in org.exist.dom">DocumentImpl</A>&nbsp;document)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method is called after the operation completed.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ContentHandler.html" title="class or interface in org.xml.sax">ContentHandler</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exist/collections/triggers/DocumentTrigger.html#getInputHandler()">getInputHandler</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the input content handler.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ext/LexicalHandler.html" title="class or interface in org.xml.sax.ext">LexicalHandler</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exist/collections/triggers/DocumentTrigger.html#getLexicalInputHandler()">getLexicalInputHandler</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the lexical input handler for this trigger.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ext/LexicalHandler.html" title="class or interface in org.xml.sax.ext">LexicalHandler</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exist/collections/triggers/DocumentTrigger.html#getLexicalOutputHandler()">getLexicalOutputHandler</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Called by the database to set the lexical output handler for this trigger.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ContentHandler.html" title="class or interface in org.xml.sax">ContentHandler</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exist/collections/triggers/DocumentTrigger.html#getOutputHandler()">getOutputHandler</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the output handler to which SAX events should be forwarded.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exist/collections/triggers/DocumentTrigger.html#isValidating()">isValidating</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns true if the SAX parser is currently in validation phase.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exist/collections/triggers/DocumentTrigger.html#prepare(int, org.exist.storage.DBBroker, org.exist.storage.txn.Txn, org.exist.xmldb.XmldbURI, org.exist.dom.DocumentImpl)">prepare</A></B>(int&nbsp;event,
        <A HREF="../../../../org/exist/storage/DBBroker.html" title="class in org.exist.storage">DBBroker</A>&nbsp;broker,
        <A HREF="../../../../org/exist/storage/txn/Txn.html" title="class in org.exist.storage.txn">Txn</A>&nbsp;transaction,
        <A HREF="../../../../org/exist/xmldb/XmldbURI.html" title="class in org.exist.xmldb">XmldbURI</A>&nbsp;documentPath,
        <A HREF="../../../../org/exist/dom/DocumentImpl.html" title="class in org.exist.dom">DocumentImpl</A>&nbsp;existingDocument)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method is called once before the database will actually parse the input data.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exist/collections/triggers/DocumentTrigger.html#setLexicalOutputHandler(org.xml.sax.ext.LexicalHandler)">setLexicalOutputHandler</A></B>(<A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ext/LexicalHandler.html" title="class or interface in org.xml.sax.ext">LexicalHandler</A>&nbsp;handler)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Called by the database to set the lexical output content handler for this trigger.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exist/collections/triggers/DocumentTrigger.html#setOutputHandler(org.xml.sax.ContentHandler)">setOutputHandler</A></B>(<A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ContentHandler.html" title="class or interface in org.xml.sax">ContentHandler</A>&nbsp;handler)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Called by the database to set the output content handler for this trigger.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/exist/collections/triggers/DocumentTrigger.html#setValidating(boolean)">setValidating</A></B>(boolean&nbsp;validating)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Called by the database to report that it is entering validation phase.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_org.exist.collections.triggers.Trigger"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from interface org.exist.collections.triggers.<A HREF="../../../../org/exist/collections/triggers/Trigger.html" title="interface in org.exist.collections.triggers">Trigger</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../../org/exist/collections/triggers/Trigger.html#configure(org.exist.storage.DBBroker, org.exist.collections.Collection, java.util.Map)">configure</A>, <A HREF="../../../../org/exist/collections/triggers/Trigger.html#getLogger()">getLogger</A></CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_org.xml.sax.ContentHandler"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from interface org.xml.sax.<A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ContentHandler.html" title="class or interface in org.xml.sax">ContentHandler</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ContentHandler.html#characters(char[], int, int)" title="class or interface in org.xml.sax">characters</A>, <A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ContentHandler.html#endDocument()" title="class or interface in org.xml.sax">endDocument</A>, <A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ContentHandler.html#endElement(java.lang.String, java.lang.String, java.lang.String)" title="class or interface in org.xml.sax">endElement</A>, <A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ContentHandler.html#endPrefixMapping(java.lang.String)" title="class or interface in org.xml.sax">endPrefixMapping</A>, <A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ContentHandler.html#ignorableWhitespace(char[], int, int)" title="class or interface in org.xml.sax">ignorableWhitespace</A>, <A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ContentHandler.html#processingInstruction(java.lang.String, java.lang.String)" title="class or interface in org.xml.sax">processingInstruction</A>, <A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ContentHandler.html#setDocumentLocator(org.xml.sax.Locator)" title="class or interface in org.xml.sax">setDocumentLocator</A>, <A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ContentHandler.html#skippedEntity(java.lang.String)" title="class or interface in org.xml.sax">skippedEntity</A>, <A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ContentHandler.html#startDocument()" title="class or interface in org.xml.sax">startDocument</A>, <A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ContentHandler.html#startElement(java.lang.String, java.lang.String, java.lang.String, org.xml.sax.Attributes)" title="class or interface in org.xml.sax">startElement</A>, <A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ContentHandler.html#startPrefixMapping(java.lang.String, java.lang.String)" title="class or interface in org.xml.sax">startPrefixMapping</A></CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_org.xml.sax.ext.LexicalHandler"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from interface org.xml.sax.ext.<A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ext/LexicalHandler.html" title="class or interface in org.xml.sax.ext">LexicalHandler</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ext/LexicalHandler.html#comment(char[], int, int)" title="class or interface in org.xml.sax.ext">comment</A>, <A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ext/LexicalHandler.html#endCDATA()" title="class or interface in org.xml.sax.ext">endCDATA</A>, <A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ext/LexicalHandler.html#endDTD()" title="class or interface in org.xml.sax.ext">endDTD</A>, <A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ext/LexicalHandler.html#endEntity(java.lang.String)" title="class or interface in org.xml.sax.ext">endEntity</A>, <A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ext/LexicalHandler.html#startCDATA()" title="class or interface in org.xml.sax.ext">startCDATA</A>, <A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ext/LexicalHandler.html#startDTD(java.lang.String, java.lang.String, java.lang.String)" title="class or interface in org.xml.sax.ext">startDTD</A>, <A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ext/LexicalHandler.html#startEntity(java.lang.String)" title="class or interface in org.xml.sax.ext">startEntity</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="prepare(int, org.exist.storage.DBBroker, org.exist.storage.txn.Txn, org.exist.xmldb.XmldbURI, org.exist.dom.DocumentImpl)"><!-- --></A><H3>
prepare</H3>
<PRE>
void <B>prepare</B>(int&nbsp;event,
             <A HREF="../../../../org/exist/storage/DBBroker.html" title="class in org.exist.storage">DBBroker</A>&nbsp;broker,
             <A HREF="../../../../org/exist/storage/txn/Txn.html" title="class in org.exist.storage.txn">Txn</A>&nbsp;transaction,
             <A HREF="../../../../org/exist/xmldb/XmldbURI.html" title="class in org.exist.xmldb">XmldbURI</A>&nbsp;documentPath,
             <A HREF="../../../../org/exist/dom/DocumentImpl.html" title="class in org.exist.dom">DocumentImpl</A>&nbsp;existingDocument)
             throws <A HREF="../../../../org/exist/collections/triggers/TriggerException.html" title="class in org.exist.collections.triggers">TriggerException</A></PRE>
<DL>
<DD>This method is called once before the database will actually parse the input data. You may take any action
 here, using the supplied broker instance.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>event</CODE> - the type of event that triggered this call (see the constants defined in this interface). The ContentHandler instance for the output.<DD><CODE>broker</CODE> - the database instance used to process the current action.<DD><CODE>transaction</CODE> - the current transaction context<DD><CODE>documentPath</CODE> - the full absolute path of the document currently processed.<DD><CODE>existingDocument</CODE> - optional: if event is a <A HREF="../../../../org/exist/collections/triggers/Trigger.html#UPDATE_DOCUMENT_EVENT"><CODE>Trigger.UPDATE_DOCUMENT_EVENT</CODE></A>,
  existingDocument will contain the Document object for the old document, which will be overwritten. Otherwise, the parameter
  is null.
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../org/exist/collections/triggers/TriggerException.html" title="class in org.exist.collections.triggers">TriggerException</A></CODE> - throwing a TriggerException will abort the current action.</DL>
</DD>
</DL>
<HR>

<A NAME="finish(int, org.exist.storage.DBBroker, org.exist.storage.txn.Txn, org.exist.xmldb.XmldbURI, org.exist.dom.DocumentImpl)"><!-- --></A><H3>
finish</H3>
<PRE>
void <B>finish</B>(int&nbsp;event,
            <A HREF="../../../../org/exist/storage/DBBroker.html" title="class in org.exist.storage">DBBroker</A>&nbsp;broker,
            <A HREF="../../../../org/exist/storage/txn/Txn.html" title="class in org.exist.storage.txn">Txn</A>&nbsp;transaction,
            <A HREF="../../../../org/exist/xmldb/XmldbURI.html" title="class in org.exist.xmldb">XmldbURI</A>&nbsp;documentPath,
            <A HREF="../../../../org/exist/dom/DocumentImpl.html" title="class in org.exist.dom">DocumentImpl</A>&nbsp;document)</PRE>
<DL>
<DD>This method is called after the operation completed. At this point, the document has already
 been stored.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>event</CODE> - the type of event that triggered this call (see the constants defined in this interface).<DD><CODE>broker</CODE> - the database instance used to process the current action.<DD><CODE>transaction</CODE> - the current transaction context<DD><CODE>documentPath</CODE> - the path of the document, if removed the old path of the document<DD><CODE>document</CODE> - the stored document or null if the document is removed</DL>
</DD>
</DL>
<HR>

<A NAME="isValidating()"><!-- --></A><H3>
isValidating</H3>
<PRE>
boolean <B>isValidating</B>()</PRE>
<DL>
<DD>Returns true if the SAX parser is currently in validation phase. During validation phase, the trigger
 may safely throw a SAXException. However, if is <A HREF="../../../../org/exist/collections/triggers/DocumentTrigger.html#isValidating()"><CODE>isValidating</CODE></A> returns false, no exceptions should be
 thrown.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>true if the parser is in validation phase.</DL>
</DD>
</DL>
<HR>

<A NAME="setValidating(boolean)"><!-- --></A><H3>
setValidating</H3>
<PRE>
void <B>setValidating</B>(boolean&nbsp;validating)</PRE>
<DL>
<DD>Called by the database to report that it is entering validation phase.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>validating</CODE> - </DL>
</DD>
</DL>
<HR>

<A NAME="setOutputHandler(org.xml.sax.ContentHandler)"><!-- --></A><H3>
setOutputHandler</H3>
<PRE>
void <B>setOutputHandler</B>(<A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ContentHandler.html" title="class or interface in org.xml.sax">ContentHandler</A>&nbsp;handler)</PRE>
<DL>
<DD>Called by the database to set the output content handler for this trigger.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>handler</CODE> - </DL>
</DD>
</DL>
<HR>

<A NAME="setLexicalOutputHandler(org.xml.sax.ext.LexicalHandler)"><!-- --></A><H3>
setLexicalOutputHandler</H3>
<PRE>
void <B>setLexicalOutputHandler</B>(<A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ext/LexicalHandler.html" title="class or interface in org.xml.sax.ext">LexicalHandler</A>&nbsp;handler)</PRE>
<DL>
<DD>Called by the database to set the lexical output content handler for this trigger.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>handler</CODE> - </DL>
</DD>
</DL>
<HR>

<A NAME="getOutputHandler()"><!-- --></A><H3>
getOutputHandler</H3>
<PRE>
<A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ContentHandler.html" title="class or interface in org.xml.sax">ContentHandler</A> <B>getOutputHandler</B>()</PRE>
<DL>
<DD>Returns the output handler to which SAX events should be forwarded.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>The ContentHandler instance for the output.</DL>
</DD>
</DL>
<HR>

<A NAME="getInputHandler()"><!-- --></A><H3>
getInputHandler</H3>
<PRE>
<A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ContentHandler.html" title="class or interface in org.xml.sax">ContentHandler</A> <B>getInputHandler</B>()</PRE>
<DL>
<DD>Returns the input content handler. Usually, this method should just return
 the trigger object itself, i.e. <b>this</b>. However, the trigger may choose to provide
 a different content handler.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>the ContentHandler to be called by the database.</DL>
</DD>
</DL>
<HR>

<A NAME="getLexicalOutputHandler()"><!-- --></A><H3>
getLexicalOutputHandler</H3>
<PRE>
<A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ext/LexicalHandler.html" title="class or interface in org.xml.sax.ext">LexicalHandler</A> <B>getLexicalOutputHandler</B>()</PRE>
<DL>
<DD>Called by the database to set the lexical output handler for this trigger.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>The LexicalHandler instance for the output.</DL>
</DD>
</DL>
<HR>

<A NAME="getLexicalInputHandler()"><!-- --></A><H3>
getLexicalInputHandler</H3>
<PRE>
<A HREF="http://java.sun.com/javase/6/docs/api/org/xml/sax/ext/LexicalHandler.html" title="class or interface in org.xml.sax.ext">LexicalHandler</A> <B>getLexicalInputHandler</B>()</PRE>
<DL>
<DD>Returns the lexical input handler for this trigger. See <A HREF="../../../../org/exist/collections/triggers/DocumentTrigger.html#getInputHandler()"><CODE>getInputHandler</CODE></A>.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>The LexicalHandler instance for the input.</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/exist/collections/triggers/CollectionTrigger.html" title="interface in org.exist.collections.triggers"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../org/exist/collections/triggers/Dumper.html" title="class in org.exist.collections.triggers"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?org/exist/collections/triggers/DocumentTrigger.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="DocumentTrigger.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright (C) Wolfgang Meier. All rights reserved.
</BODY>
</HTML>
