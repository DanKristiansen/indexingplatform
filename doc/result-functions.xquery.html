<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html xml:space="preserve"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>xqDoc -- Module</title><script language="JavaScript"><!--
        function popUp(URL) {
                 day = new Date();
                 id = day.getTime();
                 eval("page = window.open(URL, 'xqdoccode', 'toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=0,resizable=1,width=600,height=400,left = 412,top = 334');")
                 page.focus();
        }
      --></script><script language="JavaScript"><!--
	    function litePopUp(str) {    
  		  OpenWindow=window.open('', 'xqdoccode', 'toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=0,resizable=1,width=600,height=400,left = 412,top = 334');
  		  OpenWindow.document.write('<html xmlspace="preserve">');
  		  OpenWindow.document.write('<head>');
  		  OpenWindow.document.write('<title>xqDoc - Code Sample</title>');
  		  OpenWindow.document.write('</head>');  		    		    		  
  		  OpenWindow.document.write('<body xml:space="preserve">');
  		  OpenWindow.document.write('<pre>');
 		  OpenWindow.document.write(str);
 		  OpenWindow.document.write('</pre>');
  		  OpenWindow.document.write('</body>');
  		  OpenWindow.document.write('</html>');
  		  OpenWindow.document.close();
  		  page.focus();
        }
      --></script><style><!--
body		{
		font: 80% Verdana;
		}
table		{
		font-size: 100%;
		}
h1, h2, h3, h4, h5, h6
		{
		clear: both;
		float: none;
		}
h1		{
		font-size: 100%;
		margin: 0em;
		}
h2		{
		font-size: 180%;
		margin-bottom: -1em;
		margin-top: .3em;
		}
h3		{
		font-size: 150%;
		}	
h4		{
		font-size: 140%;
		background-color: #ccf;
		border-bottom: 1px solid #99f;
		width: 100%;
		}
h5		{
		margin: 1em 0em 0em 0em;
		font-size: 120%;
		}
h6		{
		margin: 0em 0em 0em 3em;
		font-style: italic;
		font: bold italic;
		font-size: 100%;
		}
#variables, #methods, #methoddetail
		{
		padding-left: 3em;
		margin-bottom: 1.4em;
		clear: both;
		float: none;
		}
#methods ul.method, #variables ul.method
		{
		margin: 1em 0em 0em;
		}
#methoddetail ul.method
		{
		margin: 0em;
		}
div.inexternal
		{
		padding-left: 2em;
		margin-bottom: 1em;
		}
div.methoddetail p
		{
		float: none;
		clear: both;
		padding-left: 2em;
		margin-bottom: 1em;
		}
div.methoddetail{
		padding-bottom: 1em;
		}
div.methoddetail li
		{
		list-style-type: none;
		font-weight: bold;
		}
div.methoddetail li li
		{
		list-style-type: circle;
		font-weight: normal;
		}
div.methoddetail li ul
		{
		padding-bottom: 0.5em;
		font-weight: normal;
		}
table.inexternal{
		clear: both;
		float: none;
		width: 80%;
		margin-left: 3em;
		padding: 0em;
		
		}
table.inexternal th
		{
		background-color:#dedede;
		width: 50%;
		}			
td		{
		vertical-align: top;
		}
div.description {
		margin-top: .5em;
		font-weight: normal;
		padding-left: 1em;
		}
ul.method	{
		clear: both;
		float: none;
		width: 90%;
		list-style-type: none;
		border-top: 1px solid #ccc;
		}
ul.method li.left
		{
		float: left;
		clear: none;
		width: 40%;
		font-weight: bold;
		margin-bottom: 2em;
		}
ul.method li.right
		{
		position: relative;
            top: 0em;
		float: left;
            width: 55%;
		margin-bottom: 2em;
		padding-left: 2em;
		}
div.home 	{
		width: 60%;
		float: left;
		margin-right: 1%;
		border: 1px
		}
div.home h4	{
		font-size: 120%;
		background-color: #fff;
		border-bottom: 1px solid #99f;
		width: 100%;
		margin-bottom: -1em;
		}
div.overview p {
               width: 60%;
               }
     
 --></style></head><body><h4>Module URI</h4><h1>http://dda.dk/ddi/result</h1><h4>Module Description</h4><p> This module contains the functions used to process results and is used by the search module. The entry function for this module is <b xmlns:xqdoc="http://www.xqdoc.org/1.0">result:buildResultListItem</b>.<br xmlns:xqdoc="http://www.xqdoc.org/1.0"> Additionally, it is possible to find references for a specific DDI element using the <b xmlns:xqdoc="http://www.xqdoc.org/1.0">result:getReferences</b> function. This function is used by <b xmlns:xqdoc="http://www.xqdoc.org/1.0">result:buildResultListItem</b> and it is not necessary to call it manually.<br xmlns:xqdoc="http://www.xqdoc.org/1.0"> The rest of the functions are local and cannot be used externally. </p><ul></ul>&nbsp;<h4>Imported Modules</h4><div id="imports"><div><ul class="method"><li class="left">http://dda.dk/ddi/context</li><li class="right"></li></ul><ul></ul></div></div>&nbsp;<h4>Function Summary</h4><div id="methods"><a name="methods"></a><ul class="method"><li class="left"><a href="#buildResultListItem">buildResultListItem</a><div class="description"> Returns a single LightXmlObject element containing a single result </div></li><li class="right">( $result as element() ,<br>&nbsp; $scope as element()) as element()<br><br></li></ul><ul class="method"><li class="left"><a href="#createCategoryCustomFromId">createCategoryCustomFromId</a><div class="description"> Returns a Custom element containing the info about the Category</div></li><li class="right">( $categoryId as xs:string) as element()<br><br></li></ul><ul class="method"><li class="left"><a href="#createConceptCustomFromId">createConceptCustomFromId</a><div class="description"> Returns a Custom element containing the info about the Concept</div></li><li class="right">( $conceptId as xs:string) as element()<br><br></li></ul><ul class="method"><li class="left"><a href="#createCustomLabel">createCustomLabel</a><div class="description"> Returns a Custom element(s) </div></li><li class="right">( $nodes as element()*) as element()*<br><br></li></ul><ul class="method"><li class="left"><a href="#createLabel">createLabel</a><div class="description"> Returns a Label element(s)</div></li><li class="right">( $nodes as element()*) as element()*<br><br></li></ul><ul class="method"><li class="left"><a href="#createMultipleQuestionItemCustomFromId">createMultipleQuestionItemCustomFromId</a><div class="description"> Returns a Custom element containing the info about the MultipleQuestionItem</div></li><li class="right">( $multipleQuestionItemId as xs:string) as element()<br><br></li></ul><ul class="method"><li class="left"><a href="#createQuestionItemCustomFromId">createQuestionItemCustomFromId</a><div class="description"> Returns a Custom element containing the info about the QuestionItem</div></li><li class="right">( $questionItemId as xs:string) as element()<br><br></li></ul><ul class="method"><li class="left"><a href="#createStudyUnitCustom">createStudyUnitCustom</a><div class="description"> Returns a Custom element containing the info about the StudyUnit </div></li><li class="right">( $result as element()) as element()<br><br></li></ul><ul class="method"><li class="left"><a href="#createUniverseCustomFromId">createUniverseCustomFromId</a><div class="description"> Returns a Custom element containing the info about the Universe</div></li><li class="right">( $universeId as xs:string) as element()<br><br></li></ul><ul class="method"><li class="left"><a href="#createVariableCustomFromId">createVariableCustomFromId</a><div class="description"> Returns a Custom element containing the info about the Variable</div></li><li class="right">( $variableId as xs:string) as element()<br><br></li></ul><ul class="method"><li class="left"><a href="#getContext">getContext</a><div class="description"> Returns the context of the matches found in the element, and highlights the matches</div></li><li class="right">( $node as element()) as element()<br><br></li></ul><ul class="method"><li class="left"><a href="#getLabel">getLabel</a><div class="description"> Finds the element containing the human readable text and returns its value in a Label element(s)</div></li><li class="right">( $node as element()) as element()*<br><br></li></ul><ul class="method"><li class="left"><a href="#getReferences">getReferences</a><div class="description"> Returns a list of references for s specific element, i.</div></li><li class="right">( $resultElement as element() ,<br>&nbsp; $scope as element()) as element()*<br><br></li></ul></div>&nbsp;<h4>Function Detail</h4><div id="methoddetail"><div id="buildResultListItem" class="methoddetail"><h5><a name="buildResultListItem"></a>buildResultListItem</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function result:buildResultListItem($result as element(), $scope as element()) as element(){<br/&gt;    let $result-name := local-name($result)<br/&gt;    return &amp;lt;LightXmlObject element=&#34;{$result-name}&#34; id=&#34;{data($result/@id)}&#34; version=&#34;{data($result/@version)}&#34;<br/&gt;        parentId=&#34;{data($result/../@id)}&#34; parentVersion=&#34;{data($result/../@version)}&#34;&amp;gt;<br/&gt;        {local:getContext($result)}<br/&gt;        {local:getLabel($result)}<br/&gt;        {local:createStudyUnitCustom($result)}<br/&gt;        {result:getReferences($result, $scope)}<br/&gt;    &amp;lt;/LightXmlObject&amp;gt;<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $result as element() ,<br>&nbsp; $scope as element()) as element()<br><br></li></ul><p> Returns a single LightXmlObject element containing a single result </p><ul><li>Parameters:</li><ul><li>$result - one element in the result list obtained by the query<br></li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="2">http://www.w3.org/2005/xpath-functions</td><td>data</td></tr><tr><td>local-name</td></tr></table></div><div class="methoddetail"><h6>Internal Functions used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">http://dda.dk/ddi/result</td><td><a href="#getReferences">getReferences</a></td></tr></table></div></div>&nbsp;<div id="createCategoryCustomFromId" class="methoddetail"><h5><a name="createCategoryCustomFromId"></a>createCategoryCustomFromId</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function local:createCategoryCustomFromId($categoryId as xs:string) as element(){<br/&gt;    let $category := collection(&amp;apos;/db/dda&amp;apos;)//lp:Category[ft:query(@id, $categoryId)]<br/&gt;    return &amp;lt;CustomList type=&#34;Category&#34;&amp;gt;<br/&gt;        &amp;lt;Custom option=&#34;id&#34;&amp;gt;{data($category/@id)}&amp;lt;/Custom&amp;gt;<br/&gt;        {local:createCustomLabel($category/r:Label)}<br/&gt;    &amp;lt;/CustomList&amp;gt;<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $categoryId as xs:string) as element()<br><br></li></ul><p> Returns a Custom element containing the info about the Category</p><ul><li>Parameters:</li><ul><li>$categoryId - the ID of the Category<br></li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="2">http://www.w3.org/2005/xpath-functions</td><td>collection</td></tr><tr><td>data</td></tr></table></div></div>&nbsp;<div id="createConceptCustomFromId" class="methoddetail"><h5><a name="createConceptCustomFromId"></a>createConceptCustomFromId</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function local:createConceptCustomFromId($conceptId as xs:string) as element(){<br/&gt;    let $concept := collection(&amp;apos;/db/dda&amp;apos;)//cc:Concept[ft:query(@id, $conceptId)]<br/&gt;    return &amp;lt;CustomList type=&#34;Concept&#34;&amp;gt;<br/&gt;        &amp;lt;Custom option=&#34;id&#34;&amp;gt;{$conceptId}&amp;lt;/Custom&amp;gt;<br/&gt;        {local:createCustomLabel($concept/r:Label)}<br/&gt;    &amp;lt;/CustomList&amp;gt;<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $conceptId as xs:string) as element()<br><br></li></ul><p> Returns a Custom element containing the info about the Concept</p><ul><li>Parameters:</li><ul><li>$conceptId - the ID of the Concept<br></li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">http://www.w3.org/2005/xpath-functions</td><td>collection</td></tr></table></div></div>&nbsp;<div id="createCustomLabel" class="methoddetail"><h5><a name="createCustomLabel"></a>createCustomLabel</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function local:createCustomLabel($nodes as element()*) as element()*{<br/&gt;    for $node in $nodes<br/&gt;        return if (data($node/@xml:lang)) then &amp;lt;Custom option=&#34;label&#34; value=&#34;{data($node/@xml:lang)}&#34;&amp;gt;{data($node)}&amp;lt;/Custom&amp;gt;<br/&gt;                                          else &amp;lt;Custom option=&#34;label&#34;&amp;gt;{data($node)}&amp;lt;/Custom&amp;gt;<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $nodes as element()*) as element()*<br><br></li></ul><p> Returns a Custom element(s) </p><ul><li>Parameters:</li><ul><li>$nodes - the element(s) containing the value for the Custom element<br></li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">http://www.w3.org/2005/xpath-functions</td><td>data</td></tr></table></div></div>&nbsp;<div id="createLabel" class="methoddetail"><h5><a name="createLabel"></a>createLabel</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function local:createLabel($nodes as element()*) as element()*{<br/&gt;    for $node in $nodes<br/&gt;        return &amp;lt;Label lang=&#34;{data($node/@xml:lang)}&#34;&amp;gt;{data($node)}&amp;lt;/Label&amp;gt;<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $nodes as element()*) as element()*<br><br></li></ul><p> Returns a Label element(s)</p><ul><li>Parameters:</li><ul><li>$nodes - the element(s) containing the value for the Label<br></li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">http://www.w3.org/2005/xpath-functions</td><td>data</td></tr></table></div></div>&nbsp;<div id="createMultipleQuestionItemCustomFromId" class="methoddetail"><h5><a name="createMultipleQuestionItemCustomFromId"></a>createMultipleQuestionItemCustomFromId</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function local:createMultipleQuestionItemCustomFromId($multipleQuestionItemId as xs:string) as element(){<br/&gt;    let $multipleQuestionItem := collection(&amp;apos;/db/dda&amp;apos;)//dc:MultipleQuestionItem[ft:query(@id, $multipleQuestionItemId)]<br/&gt;    return &amp;lt;CustomList type=&#34;MultipleQuestionItem&#34;&amp;gt;<br/&gt;        &amp;lt;Custom option=&#34;id&#34;&amp;gt;{data($multipleQuestionItem/@id)}&amp;lt;/Custom&amp;gt;<br/&gt;        {local:createCustomLabel($multipleQuestionItem/dc:QuestionText/dc:LiteralText/dc:Text)}<br/&gt;    &amp;lt;/CustomList&amp;gt;<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $multipleQuestionItemId as xs:string) as element()<br><br></li></ul><p> Returns a Custom element containing the info about the MultipleQuestionItem</p><ul><li>Parameters:</li><ul><li>$multipleQuestionItemId - the ID of the MultipleQuestionItem<br></li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="2">http://www.w3.org/2005/xpath-functions</td><td>collection</td></tr><tr><td>data</td></tr></table></div></div>&nbsp;<div id="createQuestionItemCustomFromId" class="methoddetail"><h5><a name="createQuestionItemCustomFromId"></a>createQuestionItemCustomFromId</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function local:createQuestionItemCustomFromId($questionItemId as xs:string) as element(){<br/&gt;    let $questionItem := collection(&amp;apos;/db/dda&amp;apos;)//dc:QuestionItem[ft:query(@id, $questionItemId)]<br/&gt;    return &amp;lt;CustomList type=&#34;QuestionItem&#34;&amp;gt;<br/&gt;        &amp;lt;Custom option=&#34;id&#34;&amp;gt;{data($questionItem/@id)}&amp;lt;/Custom&amp;gt;<br/&gt;        {local:createCustomLabel($questionItem/dc:QuestionText/dc:LiteralText/dc:Text)}<br/&gt;    &amp;lt;/CustomList&amp;gt;<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $questionItemId as xs:string) as element()<br><br></li></ul><p> Returns a Custom element containing the info about the QuestionItem</p><ul><li>Parameters:</li><ul><li>$questionItemId - the ID of the QuestionItem<br></li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="2">http://www.w3.org/2005/xpath-functions</td><td>collection</td></tr><tr><td>data</td></tr></table></div></div>&nbsp;<div id="createStudyUnitCustom" class="methoddetail"><h5><a name="createStudyUnitCustom"></a>createStudyUnitCustom</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function local:createStudyUnitCustom($result as element()) as element(){<br/&gt;    let $study-unit := $result/ancestor-or-self::su:StudyUnit    <br/&gt;    return &amp;lt;CustomList type=&#34;StudyUnit&#34;&amp;gt;<br/&gt;        &amp;lt;Custom option=&#34;id&#34;&amp;gt;{data($study-unit/@id)}&amp;lt;/Custom&amp;gt;<br/&gt;        &amp;lt;Custom option=&#34;version&#34;&amp;gt;{data($study-unit/@version)}&amp;lt;/Custom&amp;gt;<br/&gt;        {local:createCustomLabel($study-unit/r:Citation/r:Title)}<br/&gt;        &amp;lt;Custom option=&#34;start&#34;&amp;gt;{data($study-unit/r:Coverage/r:TemporalCoverage/r:ReferenceDate/r:StartDate)}&amp;lt;/Custom&amp;gt;<br/&gt;        &amp;lt;Custom option=&#34;end&#34;&amp;gt;{data($study-unit/r:Coverage/r:TemporalCoverage/r:ReferenceDate/r:EndDate)}&amp;lt;/Custom&amp;gt;<br/&gt;    &amp;lt;/CustomList&amp;gt;<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $result as element()) as element()<br><br></li></ul><p> Returns a Custom element containing the info about the StudyUnit </p><ul><li>Parameters:</li><ul><li>$result - one element in the result list obtained by the query<br></li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">http://www.w3.org/2005/xpath-functions</td><td>data</td></tr></table></div></div>&nbsp;<div id="createUniverseCustomFromId" class="methoddetail"><h5><a name="createUniverseCustomFromId"></a>createUniverseCustomFromId</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function local:createUniverseCustomFromId($universeId as xs:string) as element(){<br/&gt;    let $universe := collection(&amp;apos;/db/dda&amp;apos;)//cc:Universe[ft:query(@id, $universeId)]<br/&gt;    return &amp;lt;CustomList type=&#34;Universe&#34;&amp;gt;<br/&gt;        &amp;lt;Custom option=&#34;id&#34;&amp;gt;{$universeId}&amp;lt;/Custom&amp;gt;<br/&gt;        {local:createCustomLabel($universe/r:Label)}<br/&gt;    &amp;lt;/CustomList&amp;gt;<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $universeId as xs:string) as element()<br><br></li></ul><p> Returns a Custom element containing the info about the Universe</p><ul><li>Parameters:</li><ul><li>$universeId - the ID of the Universe<br></li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">http://www.w3.org/2005/xpath-functions</td><td>collection</td></tr></table></div></div>&nbsp;<div id="createVariableCustomFromId" class="methoddetail"><h5><a name="createVariableCustomFromId"></a>createVariableCustomFromId</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function local:createVariableCustomFromId($variableId as xs:string) as element(){<br/&gt;    let $variable := collection(&amp;apos;/db/dda&amp;apos;)//lp:Variable[ft:query(@id, $variableId)]<br/&gt;    return &amp;lt;CustomList type=&#34;Variable&#34;&amp;gt;<br/&gt;        &amp;lt;Custom option=&#34;id&#34;&amp;gt;{data($variable/@id)}&amp;lt;/Custom&amp;gt;<br/&gt;        {local:createCustomLabel($variable/r:Label)}<br/&gt;    &amp;lt;/CustomList&amp;gt;<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $variableId as xs:string) as element()<br><br></li></ul><p> Returns a Custom element containing the info about the Variable</p><ul><li>Parameters:</li><ul><li>$variableId - the ID of the Variable<br></li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="2">http://www.w3.org/2005/xpath-functions</td><td>collection</td></tr><tr><td>data</td></tr></table></div></div>&nbsp;<div id="getContext" class="methoddetail"><h5><a name="getContext"></a>getContext</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function local:getContext($node as element()) as element(){<br/&gt;    &amp;lt;Context&amp;gt;<br/&gt;    {<br/&gt;        let $matches := util:expand($node)//exist:match<br/&gt;        return<br/&gt;        for $contextElement in $matches/parent::*<br/&gt;            return<br/&gt;            <br/&gt;            context:get-context($contextElement, 50)<br/&gt;    }<br/&gt;    &amp;lt;/Context&amp;gt;<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $node as element()) as element()<br><br></li></ul><p> Returns the context of the matches found in the element, and highlights the matches</p><ul><li>Parameters:</li><ul><li>$node - the nodes which contains the matches<br></li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">http://dda.dk/ddi/context</td><td>get-context</td></tr></table></div></div>&nbsp;<div id="getLabel" class="methoddetail"><h5><a name="getLabel"></a>getLabel</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function local:getLabel($node as element()) as element()*{<br/&gt;    let $node-name := local-name($node)<br/&gt;    return if ($node-name eq &amp;apos;Concept&amp;apos; or $node-name eq &amp;apos;Universe&amp;apos; or $node-name eq &amp;apos;Variable&amp;apos; or $node-name eq &amp;apos;Category&amp;apos;) then<br/&gt;        local:createLabel($node/r:Label)<br/&gt;    else if ($node-name eq &amp;apos;QuestionItem&amp;apos; or $node-name eq &amp;apos;MultipleQuestionItem&amp;apos;) then<br/&gt;        local:createLabel($node/dc:QuestionText/dc:LiteralText/dc:Text)<br/&gt;    else if ($node-name eq &amp;apos;StudyUnit&amp;apos;) then<br/&gt;        local:createLabel($node/r:Citation/r:Title)<br/&gt;    else<br/&gt;        local:createLabel($node)<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $node as element()) as element()*<br><br></li></ul><p> Finds the element containing the human readable text and returns its value in a Label element(s)</p><ul><li>Parameters:</li><ul><li>$node - the nodes which contains the human readable text in its descendants<br></li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">http://www.w3.org/2005/xpath-functions</td><td>local-name</td></tr></table></div></div>&nbsp;<div id="getReferences" class="methoddetail"><h5><a name="getReferences"></a>getReferences</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function result:getReferences($resultElement as element(), $scope as element()) as element()*{<br/&gt;    let $resultElementId := string($resultElement/@id)<br/&gt;    let $resultElementName := local-name($resultElement)<br/&gt;    <br/&gt;    let $referenceList :=<br/&gt;             if ($resultElementName eq &amp;apos;StudyUnit&amp;apos;) then collection(&amp;apos;/db/dda-denormalization&amp;apos;)//d:StudyUnit[ft:query(@id, $resultElementId)]<br/&gt;        else if ($resultElementName eq &amp;apos;Variable&amp;apos;) then collection(&amp;apos;/db/dda-denormalization&amp;apos;)//d:Variable[ft:query(@id, $resultElementId)]<br/&gt;        else if ($resultElementName eq &amp;apos;QuestionItem&amp;apos;) then collection(&amp;apos;/db/dda-denormalization&amp;apos;)//d:QuestionItem[ft:query(@id, $resultElementId)]<br/&gt;        else if ($resultElementName eq &amp;apos;MultipleQuestionItem&amp;apos;) then collection(&amp;apos;/db/dda-denormalization&amp;apos;)//d:MultipleQuestionItem[ft:query(@id, $resultElementId)]<br/&gt;        else if ($resultElementName eq &amp;apos;Universe&amp;apos;) then collection(&amp;apos;/db/dda-denormalization&amp;apos;)//d:Universe[ft:query(@id, $resultElementId)]<br/&gt;        else if ($resultElementName eq &amp;apos;Concept&amp;apos;) then collection(&amp;apos;/db/dda-denormalization&amp;apos;)//d:Concept[ft:query(@id, $resultElementId)]<br/&gt;        else if ($resultElementName eq &amp;apos;Category&amp;apos;) then collection(&amp;apos;/db/dda-denormalization&amp;apos;)//d:Category[ft:query(@id, $resultElementId)]<br/&gt;        else ()<br/&gt;<br/&gt;    <br/&gt;    let $referenceScope :=<br/&gt;        if ($scope) then $scope<br/&gt;        else<br/&gt;                 if ($resultElementName eq &amp;apos;Variable&amp;apos;) then &amp;lt;s:Scope&amp;gt;&amp;lt;s:QuestionItem/&amp;gt;&amp;lt;s:MultipleQuestionItem/&amp;gt;&amp;lt;s:Universe/&amp;gt;&amp;lt;s:Concept/&amp;gt;&amp;lt;s:Category/&amp;gt;&amp;lt;s:RepresentationType/&amp;gt;&amp;lt;/s:Scope&amp;gt;<br/&gt;            else if ($resultElementName eq &amp;apos;QuestionItem&amp;apos;) then &amp;lt;s:Scope&amp;gt;&amp;lt;s:Variable/&amp;gt;&amp;lt;s:Universe/&amp;gt;&amp;lt;s:Concept/&amp;gt;&amp;lt;s:Category/&amp;gt;&amp;lt;s:DomainType/&amp;gt;&amp;lt;/s:Scope&amp;gt;<br/&gt;            else if ($resultElementName eq &amp;apos;MultipleQuestionItem&amp;apos;) then &amp;lt;s:Scope&amp;gt;&amp;lt;s:Variable/&amp;gt;&amp;lt;s:Universe/&amp;gt;&amp;lt;s:Concept/&amp;gt;&amp;lt;s:Category/&amp;gt;&amp;lt;/s:Scope&amp;gt;<br/&gt;            else if ($resultElementName eq &amp;apos;Universe&amp;apos;) then &amp;lt;s:Scope&amp;gt;&amp;lt;s:Variable/&amp;gt;&amp;lt;/s:Scope&amp;gt;<br/&gt;            else if ($resultElementName eq &amp;apos;Concept&amp;apos;) then &amp;lt;s:Scope&amp;gt;&amp;lt;s:Variable/&amp;gt;&amp;lt;s:QuestionItem/&amp;gt;&amp;lt;s:MultipleQuestionItem/&amp;gt;&amp;lt;/s:Scope&amp;gt;<br/&gt;            else if ($resultElementName eq &amp;apos;Category&amp;apos;) then &amp;lt;s:Scope&amp;gt;&amp;lt;s:Variable/&amp;gt;&amp;lt;s:QuestionItem/&amp;gt;&amp;lt;s:MultipleQuestionItem/&amp;gt;&amp;lt;/s:Scope&amp;gt;<br/&gt;            else ()<br/&gt;<br/&gt;    <br/&gt;    <br/&gt;    let $representationType :=<br/&gt;        if ($referenceScope/s:RepresentationType) then<br/&gt;                 if ($resultElement/lp:Representation/lp:TextRepresentation) then &amp;lt;CustomList type=&#34;RepresentationType&#34;&amp;gt;&amp;lt;Custom option=&#34;type&#34;&amp;gt;TextRepresentation&amp;lt;/Custom&amp;gt;&amp;lt;/CustomList&amp;gt;<br/&gt;            else if ($resultElement/lp:Representation/lp:NumericRepresentation) then &amp;lt;CustomList type=&#34;RepresentationType&#34;&amp;gt;&amp;lt;Custom option=&#34;type&#34; value=&#34;{data($resultElement/lp:Representation/lp:NumericRepresentation/@type)}&#34;&amp;gt;NumericRepresentation&amp;lt;/Custom&amp;gt;&amp;lt;/CustomList&amp;gt;<br/&gt;            else if ($resultElement/lp:Representation/lp:CodeRepresentation) then &amp;lt;CustomList type=&#34;RepresentationType&#34;&amp;gt;&amp;lt;Custom option=&#34;type&#34;&amp;gt;CodeRepresentation&amp;lt;/Custom&amp;gt;&amp;lt;/CustomList&amp;gt;<br/&gt;            else ()<br/&gt;        else ()<br/&gt;    <br/&gt;    let $domainType :=<br/&gt;        if ($referenceScope/s:DomainType) then<br/&gt;                 if ($resultElement/dc:TextDomain) then &amp;lt;CustomList type=&#34;DomainType&#34;&amp;gt;&amp;lt;Custom option=&#34;type&#34;&amp;gt;TextDomain&amp;lt;/Custom&amp;gt;&amp;lt;/CustomList&amp;gt;<br/&gt;            else if ($resultElement/dc:NumericDomain) then &amp;lt;CustomList type=&#34;DomainType&#34;&amp;gt;&amp;lt;Custom option=&#34;type&#34; value=&#34;{data($resultElement/dc:NumericDomain/@type)}&#34;&amp;gt;NumericDomain&amp;lt;/Custom&amp;gt;&amp;lt;/CustomList&amp;gt;<br/&gt;            else if ($resultElement/dc:CodeDomain) then &amp;lt;CustomList type=&#34;DomainType&#34;&amp;gt;&amp;lt;Custom option=&#34;type&#34;&amp;gt;CodeDomain&amp;lt;/Custom&amp;gt;&amp;lt;/CustomList&amp;gt;<br/&gt;            else ()<br/&gt;        else ()<br/&gt;    let $variables :=<br/&gt;        if ($referenceScope/s:Variable) then<br/&gt;            for $variableReference in $referenceList/d:VariableReference<br/&gt;                return local:createVariableCustomFromId($variableReference/@id)<br/&gt;        else ()<br/&gt;    let $questionItems :=<br/&gt;        if ($referenceScope/s:QuestionItem) then<br/&gt;            for $questionItemReference in $referenceList/d:QuestionItemReference<br/&gt;                return local:createQuestionItemCustomFromId($questionItemReference/@id)<br/&gt;        else ()<br/&gt;    let $multipleQuestionItems :=<br/&gt;        if ($referenceScope/s:MultipleQuestionItem) then<br/&gt;            for $multipleQuestionItemReference in $referenceList/d:MultipleQuestionItemReference<br/&gt;            return local:createMultipleQuestionItemCustomFromId($multipleQuestionItemReference/@id)<br/&gt;        else ()<br/&gt;    let $universes :=<br/&gt;        if ($referenceScope/s:Universe) then<br/&gt;            for $universeReference in $referenceList/d:UniverseReference<br/&gt;            return local:createUniverseCustomFromId($universeReference/@id)<br/&gt;        else ()<br/&gt;    let $concepts :=<br/&gt;        if ($referenceScope/s:Concept) then<br/&gt;            for $conceptReference in $referenceList/d:ConceptReference<br/&gt;            return local:createConceptCustomFromId($conceptReference/@id)<br/&gt;        else ()<br/&gt;    let $categories :=<br/&gt;        if ($referenceScope/s:Category) then<br/&gt;            for $categoryReference in $referenceList/d:CategoryReference<br/&gt;            return local:createCategoryCustomFromId($categoryReference/@id)<br/&gt;        else ()<br/&gt;    <br/&gt;    return $representationType | $domainType | $variables | $questionItems | $multipleQuestionItems | $universes | $concepts | $categories<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $resultElement as element() ,<br>&nbsp; $scope as element()) as element()*<br><br></li></ul><p> Returns a list of references for s specific element, i.e. the elements either referred by or referring to that element.</p><ul><li>Parameters:</li><ul><li>$resultElement - a DDI element<br></li><li>$scope - the list of reference types we wish to return with the following format:  <br xmlns:xqdoc="http://www.xqdoc.org/1.0">   <pre xmlns:xqdoc="http://www.xqdoc.org/1.0">    &lt;s:Scope&gt;        &lt;s:StudyUnit/&gt;<br>        &lt;s:Variable/&gt;<br>        &lt;s:QuestionItem/&gt;<br>        &lt;s:MultipleQuestionItem/&gt;<br>        &lt;s:Universe/&gt;<br>        &lt;s:Concept/&gt;<br>        &lt;s:Category/&gt;<br>    &lt;/s:Scope&gt;<br></pre>    Each child-element is optional and if it is present the search will for all found results return a list of references of the type specified by that element (if any exist). The child-elements have no type or content; only the existence is checked.   <br xmlns:xqdoc="http://www.xqdoc.org/1.0">    If the scope is not specified the default list is used, which is:   <pre xmlns:xqdoc="http://www.xqdoc.org/1.0">  For Variable:              &lt;s:Scope&gt;&lt;s:QuestionItem/&gt;&lt;s:MultipleQuestionItem/&gt;&lt;s:Universe/&gt;&lt;s:Concept/&gt;&lt;s:Category/&gt;&lt;s:RepresentationType/&gt;&lt;/s:Scope&gt;<br>  For QuestionItem:          &lt;s:Scope&gt;&lt;s:Variable/&gt;&lt;s:Universe/&gt;&lt;s:Concept/&gt;&lt;s:Category/&gt;&lt;s:DomainType/&gt;&lt;/s:Scope&gt;<br>  For MultipleQuestionItem:  &lt;s:Scope&gt;&lt;s:Variable/&gt;&lt;s:Universe/&gt;&lt;s:Concept/&gt;&lt;s:Category/&gt;&lt;/s:Scope&gt;<br>  For Universe:              &lt;s:Scope&gt;&lt;s:Variable/&gt;&lt;/s:Scope&gt;<br>  For Concept:               &lt;s:Scope&gt;&lt;s:Variable/&gt;&lt;s:QuestionItem/&gt;&lt;s:MultipleQuestionItem/&gt;&lt;/s:Scope&gt;<br>  For Category:              &lt;s:Scope&gt;&lt;s:Variable/&gt;&lt;s:QuestionItem/&gt;&lt;s:MultipleQuestionItem/&gt;&lt;/s:Scope&gt;<br></pre>     <br></li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="4">http://www.w3.org/2005/xpath-functions</td><td>collection</td></tr><tr><td>data</td></tr><tr><td>local-name</td></tr><tr><td>string</td></tr></table></div><div class="methoddetail"><h6>Internal Functions that invoke this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">http://dda.dk/ddi/result</td><td><a href="#buildResultListItem">buildResultListItem</a></td></tr></table></div></div>&nbsp;</div>&nbsp;<div align="left"><i>Created by xqDoc-Lite version 1.0 on Wed Jan 11 13:14:02 CET 2012</i></div></body></html>