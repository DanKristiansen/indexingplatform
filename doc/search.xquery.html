<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html xml:space="preserve"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>xqDoc -- Module</title><script language="JavaScript"><!--
        function popUp(URL) {
                 day = new Date();
                 id = day.getTime();
                 eval("page = window.open(URL, 'xqdoccode', 'toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=0,resizable=1,width=600,height=400,left = 412,top = 334');")
                 page.focus();
        }
      --></script><script language="JavaScript"><!--
	    function litePopUp(str) {    
  		  OpenWindow=window.open('', 'xqdoccode', 'toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=0,resizable=1,width=600,height=400,left = 412,top = 334');
  		  OpenWindow.document.write('<html xmlspace="preserve">');
  		  OpenWindow.document.write('<head>');
  		  OpenWindow.document.write('<title>xqDoc - Code Sample</title>');
  		  OpenWindow.document.write('</head>');  		    		    		  
  		  OpenWindow.document.write('<body xml:space="preserve">');
  		  OpenWindow.document.write('<pre>');
 		  OpenWindow.document.write(str);
 		  OpenWindow.document.write('</pre>');
  		  OpenWindow.document.write('</body>');
  		  OpenWindow.document.write('</html>');
  		  OpenWindow.document.close();
  		  page.focus();
        }
      --></script><style><!--
body		{
		font: 80% Verdana;
		}
table		{
		font-size: 100%;
		}
h1, h2, h3, h4, h5, h6
		{
		clear: both;
		float: none;
		}
h1		{
		font-size: 100%;
		margin: 0em;
		}
h2		{
		font-size: 180%;
		margin-bottom: -1em;
		margin-top: .3em;
		}
h3		{
		font-size: 150%;
		}	
h4		{
		font-size: 140%;
		background-color: #ccf;
		border-bottom: 1px solid #99f;
		width: 100%;
		}
h5		{
		margin: 1em 0em 0em 0em;
		font-size: 120%;
		}
h6		{
		margin: 0em 0em 0em 3em;
		font-style: italic;
		font: bold italic;
		font-size: 100%;
		}
#variables, #methods, #methoddetail
		{
		padding-left: 3em;
		margin-bottom: 1.4em;
		clear: both;
		float: none;
		}
#methods ul.method, #variables ul.method
		{
		margin: 1em 0em 0em;
		}
#methoddetail ul.method
		{
		margin: 0em;
		}
div.inexternal
		{
		padding-left: 2em;
		margin-bottom: 1em;
		}
div.methoddetail p
		{
		float: none;
		clear: both;
		padding-left: 2em;
		margin-bottom: 1em;
		}
div.methoddetail{
		padding-bottom: 1em;
		}
div.methoddetail li
		{
		list-style-type: none;
		font-weight: bold;
		}
div.methoddetail li li
		{
		list-style-type: circle;
		font-weight: normal;
		}
div.methoddetail li ul
		{
		padding-bottom: 0.5em;
		font-weight: normal;
		}
table.inexternal{
		clear: both;
		float: none;
		width: 80%;
		margin-left: 3em;
		padding: 0em;
		
		}
table.inexternal th
		{
		background-color:#dedede;
		width: 50%;
		}			
td		{
		vertical-align: top;
		}
div.description {
		margin-top: .5em;
		font-weight: normal;
		padding-left: 1em;
		}
ul.method	{
		clear: both;
		float: none;
		width: 90%;
		list-style-type: none;
		border-top: 1px solid #ccc;
		}
ul.method li.left
		{
		float: left;
		clear: none;
		width: 40%;
		font-weight: bold;
		margin-bottom: 2em;
		}
ul.method li.right
		{
		position: relative;
            top: 0em;
		float: left;
            width: 55%;
		margin-bottom: 2em;
		padding-left: 2em;
		}
div.home 	{
		width: 60%;
		float: left;
		margin-right: 1%;
		border: 1px
		}
div.home h4	{
		font-size: 120%;
		background-color: #fff;
		border-bottom: 1px solid #99f;
		width: 100%;
		margin-bottom: -1em;
		}
div.overview p {
               width: 60%;
               }
     
 --></style></head><body><h4>Module URI</h4><h1>http://dda.dk/ddi</h1>&nbsp;<h4>Imported Modules</h4><div id="imports"><div><ul class="method"><li class="left">http://dda.dk/ddi/result</li><li class="right"></li></ul><ul></ul></div></div>&nbsp;<h4>Function Summary</h4><div id="methods"><a name="methods"></a><ul class="method"><li class="left"><a href="#advancedSearch">advancedSearch</a><div class="description"> Makes a free-text search in all indexed elements and returns a list of LightXmlObject elements with the results</div></li><li class="right">( $searchParameters as element()) as element()<br><br></li></ul><ul class="method"><li class="left"><a href="#buildLightXmlObjectList">buildLightXmlObjectList</a><div class="description"> Makes a LightXmlObjectList element containing the info based on the result list</div></li><li class="right">( $results as element()* ,<br>&nbsp; $hits-perpage as xs:integer ,<br>&nbsp; $hit-start as xs:integer) as element()<br><br></li></ul><ul class="method"><li class="left"><a href="#lookupCategory">lookupCategory</a><div class="description"> Searches for a Category and returns a LightXmlObjectList element with the result</div></li><li class="right">( $categoryId as xs:string) as element()<br><br></li></ul><ul class="method"><li class="left"><a href="#lookupConcept">lookupConcept</a><div class="description"> Searches for a Concept and returns a LightXmlObjectList element with the result</div></li><li class="right">( $conceptId as xs:string) as element()<br><br></li></ul><ul class="method"><li class="left"><a href="#lookupQuestion">lookupQuestion</a><div class="description"> Searches for a QuestionItem and returns a LightXmlObjectList element with the result</div></li><li class="right">( $questionId as xs:string) as element()<br><br></li></ul><ul class="method"><li class="left"><a href="#lookupUniverse">lookupUniverse</a><div class="description"> Searches for a Universe and returns a LightXmlObjectList element with the result</div></li><li class="right">( $universeId as xs:string) as element()<br><br></li></ul><ul class="method"><li class="left"><a href="#lookupVariable">lookupVariable</a><div class="description"> Searches for a Variable and returns a LightXmlObjectList element with the result</div></li><li class="right">( $variableId as xs:string) as element()<br><br></li></ul><ul class="method"><li class="left"><a href="#queryCategory">queryCategory</a><div class="description"> Makes a free-text search in Category elements and returns the element(s) containing the match</div></li><li class="right">( $search-string as xs:string) as element()*<br><br></li></ul><ul class="method"><li class="left"><a href="#queryConcept">queryConcept</a><div class="description"> Makes a free-text search in Concept elements and returns the element(s) containing the match</div></li><li class="right">( $search-string as xs:string) as element()*<br><br></li></ul><ul class="method"><li class="left"><a href="#queryQuestion">queryQuestion</a><div class="description"> Makes a free-text search in QuestionItem elements and returns the element(s) containing the match</div></li><li class="right">( $search-string as xs:string) as element()*<br><br></li></ul><ul class="method"><li class="left"><a href="#queryStudyUnit">queryStudyUnit</a><div class="description"> Makes a free-text search in StudyUnit elements and returns the element(s) containing the match</div></li><li class="right">( $search-string as xs:string) as element()*<br><br></li></ul><ul class="method"><li class="left"><a href="#queryUniverse">queryUniverse</a><div class="description"> Makes a free-text search in Universe elements and returns the element(s) containing the match</div></li><li class="right">( $search-string as xs:string) as element()*<br><br></li></ul><ul class="method"><li class="left"><a href="#queryVariable">queryVariable</a><div class="description"> Makes a free-text search in Variable elements and returns the element(s) containing the match</div></li><li class="right">( $search-string as xs:string) as element()*<br><br></li></ul><ul class="method"><li class="left"><a href="#simpleSearch">simpleSearch</a><div class="description"> Makes a free-text search in all indexed elements and returns a list of LightXmlObject elements with the results</div></li><li class="right">( $search-parameters as element()) as element()<br><br></li></ul></div>&nbsp;<h4>Function Detail</h4><div id="methoddetail"><div id="advancedSearch" class="methoddetail"><h5><a name="advancedSearch"></a>advancedSearch</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function ddi:advancedSearch($searchParameters as element()) as element(){<br/&gt;    let $searchScope := if ($searchParameters/asp:studyId) then &amp;lt;W&amp;gt;{data($searchParameters/asp:studyId)}&amp;lt;/W&amp;gt;<br/&gt;    else &amp;lt;w/&amp;gt;<br/&gt;    return $searchScope<br/&gt;<br/&gt;    <br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $searchParameters as element()) as element()<br><br></li></ul><p> Makes a free-text search in all indexed elements and returns a list of LightXmlObject elements with the results</p><ul><li>Parameters:</li><ul><li>$search-parameters - the search parameters wrapped in a AdvancedSearchParameters element with the following format:  <br xmlns:xqdoc="http://www.xqdoc.org/1.0">             &lt;asp:AdvancedSearchParameters xmlns:smd="http://dda.dk/ddi/search-metadata"           &nbsp;&nbsp;xmlns:asp="http://dda.dk/ddi/advanced-search-parameters"           &nbsp;&nbsp;xmlns:s="http://dda.dk/ddi/scope"           &nbsp;&nbsp;xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;              &nbsp;&nbsp;&nbsp;&nbsp;&lt;asp:studyId&gt;studyId0&lt;/asp:studyId&gt;                                          &lt;!-- Id of the StudyUnit we wish to limit the results to (xs:string). Optional. --&gt;   <br xmlns:xqdoc="http://www.xqdoc.org/1.0">                 &nbsp;&nbsp;&nbsp;&nbsp;&lt;asp:title&gt;title0&lt;/asp:title&gt;                                                &lt;!-- Title of the StudyUnit(s) we wish to limit the results to (xs:string). Optional. --&gt;   <br xmlns:xqdoc="http://www.xqdoc.org/1.0">                 &nbsp;&nbsp;&nbsp;&nbsp;&lt;asp:topicalCoverage&gt;topicalCoverage0&lt;/asp:topicalCoverage&gt;                  &lt;!-- TopicalCoverage of the StudyUnit(s) we wish to limit the results to (xs:string). Optional. --&gt;   <br xmlns:xqdoc="http://www.xqdoc.org/1.0">                 &nbsp;&nbsp;&nbsp;&nbsp;&lt;asp:spatialCoverage&gt;spatialCoverage0&lt;/asp:spatialCoverage&gt;                  &lt;!-- SpatialCoverage of the StudyUnit(s) we wish to limit the results to (xs:string). Optional. --&gt;   <br xmlns:xqdoc="http://www.xqdoc.org/1.0">                 &nbsp;&nbsp;&nbsp;&nbsp;&lt;asp:abstract-purpose&gt;abstract-purpose0&lt;/asp:abstract-purpose&gt;               &lt;!-- Purpose of the StudyUnit(s) we wish to limit the results to (xs:string). Optional. --&gt;   <br xmlns:xqdoc="http://www.xqdoc.org/1.0">                 &nbsp;&nbsp;&nbsp;&nbsp;&lt;asp:creator&gt;creator0&lt;/asp:creator&gt;                                          &lt;!-- Creator of the StudyUnit(s) we wish to limit the results to (xs:string). Optional. --&gt;   <br xmlns:xqdoc="http://www.xqdoc.org/1.0">                 &nbsp;&nbsp;&nbsp;&nbsp;&lt;asp:kindOfData&gt;kindOfData0&lt;/asp:kindOfData&gt;                                 &lt;!-- KindOfData of the StudyUnit(s) we wish to limit the results to (xs:string). Optional. --&gt;   <br xmlns:xqdoc="http://www.xqdoc.org/1.0">                 &nbsp;&nbsp;&nbsp;&nbsp;&lt;asp:coverageFrom&gt;2006-05-04&lt;/asp:coverageFrom&gt;                              &lt;!-- Starting coverage date of the StudyUnit we wish to limit the results to (xs:date). Optional. --&gt;   <br xmlns:xqdoc="http://www.xqdoc.org/1.0">                 &nbsp;&nbsp;&nbsp;&nbsp;&lt;asp:coverageTo&gt;2006-05-04&lt;/asp:coverageTo&gt;                                  &lt;!-- Ending coverage date of the StudyUnit we wish to limit the results to (xs:date). Optional. --&gt;   <br xmlns:xqdoc="http://www.xqdoc.org/1.0">                 &nbsp;&nbsp;&nbsp;&nbsp;&lt;asp:concept&gt;concept0&lt;/asp:concept&gt;                                          &lt;!-- Search-text for the Coverage(s) we wish to find (xs:string). If left empty Coverage will not be searched and returned. Optional. --&gt;   <br xmlns:xqdoc="http://www.xqdoc.org/1.0">                 &nbsp;&nbsp;&nbsp;&nbsp;&lt;asp:universe&gt;universe0&lt;/asp:universe&gt;                                       &lt;!-- Search-text for the Universe(s) we wish to find (xs:string). If left empty Universe will not be searched and returned. Optional. --&gt;   <br xmlns:xqdoc="http://www.xqdoc.org/1.0">                 &nbsp;&nbsp;&nbsp;&nbsp;&lt;asp:questionItem&gt;questionItem0&lt;/asp:questionItem&gt;                           &lt;!-- Search-text for the QuestionItem(s) we wish to find (xs:string). If left empty QuestionItem will not be searched and returned. Optional. --&gt;   <br xmlns:xqdoc="http://www.xqdoc.org/1.0">                 &nbsp;&nbsp;&nbsp;&nbsp;&lt;asp:multipleQuestionItem&gt;multipleQuestionItem0&lt;/asp:multipleQuestionItem&gt;   &lt;!-- Search-text for the MultipleQuestionItem(s) we wish to find (xs:string). If left empty MultipleQuestionItem will not be searched and returned. Optional. --&gt;   <br xmlns:xqdoc="http://www.xqdoc.org/1.0">                 &nbsp;&nbsp;&nbsp;&nbsp;&lt;asp:variable&gt;variable0&lt;/asp:variable&gt;                                       &lt;!-- Search-text for the Variable(s) we wish to find (xs:string). If left empty Variable will not be searched and returned. Optional. --&gt;   <br xmlns:xqdoc="http://www.xqdoc.org/1.0">                 &nbsp;&nbsp;&nbsp;&nbsp;&lt;asp:category&gt;category0&lt;/asp:category&gt;                                       &lt;!-- Search-text for the Category(s) we wish to find (xs:string). If left empty Category will not be searched and returned. Optional. --&gt;   <br xmlns:xqdoc="http://www.xqdoc.org/1.0">                 &nbsp;&nbsp;&nbsp;&nbsp;&lt;smd:SearchMetaData hits-perpage="2" hit-start="1"/&gt;                               &lt;!-- The number of hits we wish to show per page (xs:positiveInteger) and the number of the first result we wish to get (xs:nonNegativeInteger). Both required. --&gt;   <br xmlns:xqdoc="http://www.xqdoc.org/1.0">                 &nbsp;&nbsp;&nbsp;&nbsp;&lt;s:Scope&gt;                                                                          &lt;!-- The scope of our results. Each child-element is optional and if it is present the search will for all found results return a list of references of the type specified by that element (if any exist). The child-elements have no type or content; only the existence is checked. --&gt;   <br xmlns:xqdoc="http://www.xqdoc.org/1.0">                     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;s:StudyUnit/&gt;   <br xmlns:xqdoc="http://www.xqdoc.org/1.0">                     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;s:Variable/&gt;   <br xmlns:xqdoc="http://www.xqdoc.org/1.0">                     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;s:QuestionItem/&gt;   <br xmlns:xqdoc="http://www.xqdoc.org/1.0">                     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;s:MultipleQuestionItem/&gt;   <br xmlns:xqdoc="http://www.xqdoc.org/1.0">                     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;s:Universe/&gt;   <br xmlns:xqdoc="http://www.xqdoc.org/1.0">                     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;s:Concept/&gt;   <br xmlns:xqdoc="http://www.xqdoc.org/1.0">                     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;s:Category/&gt;   <br xmlns:xqdoc="http://www.xqdoc.org/1.0">                 &nbsp;&nbsp;&nbsp;&nbsp;&lt;/s:Scope&gt;   <br xmlns:xqdoc="http://www.xqdoc.org/1.0">             &lt;/asp:AdvancedSearchParameters&gt;   <br xmlns:xqdoc="http://www.xqdoc.org/1.0">     <br></li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">http://www.w3.org/2005/xpath-functions</td><td>data</td></tr></table></div></div>&nbsp;<div id="buildLightXmlObjectList" class="methoddetail"><h5><a name="buildLightXmlObjectList"></a>buildLightXmlObjectList</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function local:buildLightXmlObjectList($results as element()*, $hits-perpage as xs:integer, $hit-start as xs:integer) as element(){<br/&gt;    let $result-count := count($results)<br/&gt;    let $hit-end := if ($result-count lt $hits-perpage) then $result-count<br/&gt;                    else $hit-start + $hits-perpage<br/&gt;    let $number-of-pages :=  xs:integer(ceiling($result-count div $hits-perpage))<br/&gt;    let $current-page := xs:integer(($hit-start + $hits-perpage) div $hits-perpage)<br/&gt;<br/&gt;    return &amp;lt;dl:LightXmlObjectList xmlns:dl=&#34;ddieditor-lightobject&#34;<br/&gt;        xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34;<br/&gt;        xsi:schemaLocation=&#34;ddieditor-lightobject ddieditor-lightxmlobject.xsd&#34;<br/&gt;        xmlns:rmd=&#34;http://dda.dk/ddi/result-metadata&#34;&amp;gt;<br/&gt;        &amp;lt;rmd:ResultMetaData<br/&gt;            result-count=&#34;{$result-count}&#34;<br/&gt;            hit-start=&#34;{$hit-start}&#34;<br/&gt;            hit-end=&#34;{$hit-end}&#34;<br/&gt;            hits-perpage=&#34;{$hits-perpage}&#34;<br/&gt;            number-of-pages=&#34;{$number-of-pages}&#34;<br/&gt;            current-page=&#34;{$current-page}&#34;/&amp;gt;<br/&gt;        {<br/&gt;        for $result in $results[position() = $hit-start to $hit-end]<br/&gt;        order by ft:score($result) descending<br/&gt;            return result:buildResultListItem($result)<br/&gt;        <br/&gt;        }<br/&gt;    &amp;lt;/dl:LightXmlObjectList&amp;gt;<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $results as element()* ,<br>&nbsp; $hits-perpage as xs:integer ,<br>&nbsp; $hit-start as xs:integer) as element()<br><br></li></ul><p> Makes a LightXmlObjectList element containing the info based on the result list</p><ul><li>Parameters:</li><ul><li>$results - the result list to process<br></li><li>$hits-perpage - the number of hits to be shown per page<br></li><li>$hit-start - number of the first hit to be shown on the page<br></li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">http://dda.dk/ddi/result</td><td>buildResultListItem</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="3">http://www.w3.org/2005/xpath-functions</td><td>ceiling</td></tr><tr><td>count</td></tr><tr><td>position</td></tr></table></div></div>&nbsp;<div id="lookupCategory" class="methoddetail"><h5><a name="lookupCategory"></a>lookupCategory</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function ddi:lookupCategory($categoryId as xs:string) as element(){<br/&gt;    let $category := collection(&amp;apos;/db/dda&amp;apos;)//lp:Category[ft:query(@id, $categoryId)]<br/&gt;    return &amp;lt;dl:LightXmlObjectList xmlns:dl=&#34;ddieditor-lightobject&#34;<br/&gt;        xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34;<br/&gt;        xsi:schemaLocation=&#34;ddieditor-lightobject ddieditor-lightxmlobject.xsd&#34;<br/&gt;        xmlns:smd=&#34;http://dda.dk/ddi/search-metadata&#34;&amp;gt;<br/&gt;            {result:buildResultListItem($category)}<br/&gt;    &amp;lt;/dl:LightXmlObjectList&amp;gt;<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $categoryId as xs:string) as element()<br><br></li></ul><p> Searches for a Category and returns a LightXmlObjectList element with the result</p><ul><li>Parameters:</li><ul><li>$categoryId - the ID of the Category<br></li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">http://dda.dk/ddi/result</td><td>buildResultListItem</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">http://www.w3.org/2005/xpath-functions</td><td>collection</td></tr></table></div></div>&nbsp;<div id="lookupConcept" class="methoddetail"><h5><a name="lookupConcept"></a>lookupConcept</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function ddi:lookupConcept($conceptId as xs:string) as element(){<br/&gt;    let $concept := collection(&amp;apos;/db/dda&amp;apos;)//cc:Concept[ft:query(@id, $conceptId)]<br/&gt;    return &amp;lt;dl:LightXmlObjectList xmlns:dl=&#34;ddieditor-lightobject&#34;<br/&gt;        xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34;<br/&gt;        xsi:schemaLocation=&#34;ddieditor-lightobject ddieditor-lightxmlobject.xsd&#34;<br/&gt;        xmlns:smd=&#34;http://dda.dk/ddi/search-metadata&#34;&amp;gt;<br/&gt;            {result:buildResultListItem($concept)}<br/&gt;    &amp;lt;/dl:LightXmlObjectList&amp;gt;<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $conceptId as xs:string) as element()<br><br></li></ul><p> Searches for a Concept and returns a LightXmlObjectList element with the result</p><ul><li>Parameters:</li><ul><li>$conceptId - the ID of the Concept<br></li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">http://dda.dk/ddi/result</td><td>buildResultListItem</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">http://www.w3.org/2005/xpath-functions</td><td>collection</td></tr></table></div></div>&nbsp;<div id="lookupQuestion" class="methoddetail"><h5><a name="lookupQuestion"></a>lookupQuestion</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function ddi:lookupQuestion($questionId as xs:string) as element(){<br/&gt;    let $question := collection(&amp;apos;/db/dda&amp;apos;)//dc:QuestionItem[ft:query(@id, $questionId)]<br/&gt;    return &amp;lt;dl:LightXmlObjectList xmlns:dl=&#34;ddieditor-lightobject&#34;<br/&gt;        xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34;<br/&gt;        xsi:schemaLocation=&#34;ddieditor-lightobject ddieditor-lightxmlobject.xsd&#34;<br/&gt;        xmlns:smd=&#34;http://dda.dk/ddi/search-metadata&#34;&amp;gt;<br/&gt;            {result:buildResultListItem($question)}<br/&gt;    &amp;lt;/dl:LightXmlObjectList&amp;gt;<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $questionId as xs:string) as element()<br><br></li></ul><p> Searches for a QuestionItem and returns a LightXmlObjectList element with the result</p><ul><li>Parameters:</li><ul><li>$questionId - the ID of the QuestionItem<br></li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">http://dda.dk/ddi/result</td><td>buildResultListItem</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">http://www.w3.org/2005/xpath-functions</td><td>collection</td></tr></table></div></div>&nbsp;<div id="lookupUniverse" class="methoddetail"><h5><a name="lookupUniverse"></a>lookupUniverse</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function ddi:lookupUniverse($universeId as xs:string) as element(){<br/&gt;    let $universe := collection(&amp;apos;/db/dda&amp;apos;)//cc:Universe[ft:query(@id, $universeId)]<br/&gt;    return &amp;lt;dl:LightXmlObjectList xmlns:dl=&#34;ddieditor-lightobject&#34;<br/&gt;        xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34;<br/&gt;        xsi:schemaLocation=&#34;ddieditor-lightobject ddieditor-lightxmlobject.xsd&#34;<br/&gt;        xmlns:smd=&#34;http://dda.dk/ddi/search-metadata&#34;&amp;gt;<br/&gt;            {result:buildResultListItem($universe)}<br/&gt;    &amp;lt;/dl:LightXmlObjectList&amp;gt;<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $universeId as xs:string) as element()<br><br></li></ul><p> Searches for a Universe and returns a LightXmlObjectList element with the result</p><ul><li>Parameters:</li><ul><li>$universeId - the ID of the Universe<br></li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">http://dda.dk/ddi/result</td><td>buildResultListItem</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">http://www.w3.org/2005/xpath-functions</td><td>collection</td></tr></table></div></div>&nbsp;<div id="lookupVariable" class="methoddetail"><h5><a name="lookupVariable"></a>lookupVariable</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function ddi:lookupVariable($variableId as xs:string) as element(){<br/&gt;    let $variable := collection(&amp;apos;/db/dda&amp;apos;)//lp:Variable[ft:query(@id, $variableId)]<br/&gt;    return &amp;lt;dl:LightXmlObjectList xmlns:dl=&#34;ddieditor-lightobject&#34;<br/&gt;        xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34;<br/&gt;        xsi:schemaLocation=&#34;ddieditor-lightobject ddieditor-lightxmlobject.xsd&#34;<br/&gt;        xmlns:smd=&#34;http://dda.dk/ddi/search-metadata&#34;&amp;gt;<br/&gt;            {result:buildResultListItem($variable)}<br/&gt;    &amp;lt;/dl:LightXmlObjectList&amp;gt;<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $variableId as xs:string) as element()<br><br></li></ul><p> Searches for a Variable and returns a LightXmlObjectList element with the result</p><ul><li>Parameters:</li><ul><li>$variableId - the ID of the Variable<br></li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">http://dda.dk/ddi/result</td><td>buildResultListItem</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">http://www.w3.org/2005/xpath-functions</td><td>collection</td></tr></table></div></div>&nbsp;<div id="queryCategory" class="methoddetail"><h5><a name="queryCategory"></a>queryCategory</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function local:queryCategory($search-string as xs:string) as element()*{<br/&gt;    collection(&amp;apos;/db/dda&amp;apos;)//lp:Category[ft:query(r:Label, $search-string)]<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $search-string as xs:string) as element()*<br><br></li></ul><p> Makes a free-text search in Category elements and returns the element(s) containing the match</p><ul><li>Parameters:</li><ul><li>$search-string - the string that needs to be matched<br></li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">http://www.w3.org/2005/xpath-functions</td><td>collection</td></tr></table></div></div>&nbsp;<div id="queryConcept" class="methoddetail"><h5><a name="queryConcept"></a>queryConcept</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function local:queryConcept($search-string as xs:string) as element()*{<br/&gt;    collection(&amp;apos;/db/dda&amp;apos;)//cc:Concept[ft:query(r:Label, $search-string)] |<br/&gt;    collection(&amp;apos;/db/dda&amp;apos;)//cc:Concept[ft:query(r:Description, $search-string)]<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $search-string as xs:string) as element()*<br><br></li></ul><p> Makes a free-text search in Concept elements and returns the element(s) containing the match</p><ul><li>Parameters:</li><ul><li>$search-string - the string that needs to be matched<br></li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">http://www.w3.org/2005/xpath-functions</td><td>collection</td></tr></table></div></div>&nbsp;<div id="queryQuestion" class="methoddetail"><h5><a name="queryQuestion"></a>queryQuestion</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function local:queryQuestion($search-string as xs:string) as element()*{<br/&gt;    collection(&amp;apos;/db/dda&amp;apos;)//dc:QuestionItem[ft:query(dc:QuestionItemName, $search-string)] |<br/&gt;    collection(&amp;apos;/db/dda&amp;apos;)//dc:QuestionItem[ft:query(dc:QuestionText/dc:LiteralText/dc:Text, $search-string)] |<br/&gt;    collection(&amp;apos;/db/dda&amp;apos;)//dc:MultipleQuestionItem[ft:query(dc:MultipleQuestionItemName, $search-string)] |<br/&gt;    collection(&amp;apos;/db/dda&amp;apos;)//dc:MultipleQuestionItem[ft:query(dc:QuestionText/dc:LiteralText/dc:Text, $search-string)]<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $search-string as xs:string) as element()*<br><br></li></ul><p> Makes a free-text search in QuestionItem elements and returns the element(s) containing the match</p><ul><li>Parameters:</li><ul><li>$search-string - the string that needs to be matched<br></li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">http://www.w3.org/2005/xpath-functions</td><td>collection</td></tr></table></div></div>&nbsp;<div id="queryStudyUnit" class="methoddetail"><h5><a name="queryStudyUnit"></a>queryStudyUnit</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function local:queryStudyUnit($search-string as xs:string) as element()*{<br/&gt;    collection(&amp;apos;/db/dda&amp;apos;)//su:StudyUnit/@id[ft:query(., $search-string)] |<br/&gt;    collection(&amp;apos;/db/dda&amp;apos;)//r:Creator[ft:query(., $search-string)] |<br/&gt;    collection(&amp;apos;/db/dda&amp;apos;)//r:Title[ft:query(., $search-string)] |<br/&gt;    collection(&amp;apos;/db/dda&amp;apos;)//r:Keyword[ft:query(., $search-string)] |<br/&gt;    collection(&amp;apos;/db/dda&amp;apos;)//r:LevelName[ft:query(., $search-string)] |<br/&gt;    collection(&amp;apos;/db/dda&amp;apos;)//r:Content[ft:query(., $search-string)] |<br/&gt;    collection(&amp;apos;/db/dda&amp;apos;)//r:Content[ft:query(., $search-string)] |<br/&gt;    collection(&amp;apos;/db/dda&amp;apos;)//su:KindOfData[ft:query(., $search-string)]<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $search-string as xs:string) as element()*<br><br></li></ul><p> Makes a free-text search in StudyUnit elements and returns the element(s) containing the match</p><ul><li>Parameters:</li><ul><li>$search-string - the string that needs to be matched<br></li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">http://www.w3.org/2005/xpath-functions</td><td>collection</td></tr></table></div></div>&nbsp;<div id="queryUniverse" class="methoddetail"><h5><a name="queryUniverse"></a>queryUniverse</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function local:queryUniverse($search-string as xs:string) as element()*{<br/&gt;    collection(&amp;apos;/db/dda&amp;apos;)//cc:Universe[ft:query(r:Label, $search-string)] |<br/&gt;    collection(&amp;apos;/db/dda&amp;apos;)//cc:Universe[ft:query(cc:HumanReadable, $search-string)]<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $search-string as xs:string) as element()*<br><br></li></ul><p> Makes a free-text search in Universe elements and returns the element(s) containing the match</p><ul><li>Parameters:</li><ul><li>$search-string - the string that needs to be matched<br></li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">http://www.w3.org/2005/xpath-functions</td><td>collection</td></tr></table></div></div>&nbsp;<div id="queryVariable" class="methoddetail"><h5><a name="queryVariable"></a>queryVariable</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function local:queryVariable($search-string as xs:string) as element()*{<br/&gt;    collection(&amp;apos;/db/dda&amp;apos;)//lp:Variable[ft:query(lp:VariableName, $search-string)] |<br/&gt;    collection(&amp;apos;/db/dda&amp;apos;)//lp:Variable[ft:query(r:Label, $search-string)]<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $search-string as xs:string) as element()*<br><br></li></ul><p> Makes a free-text search in Variable elements and returns the element(s) containing the match</p><ul><li>Parameters:</li><ul><li>$search-string - the string that needs to be matched<br></li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">http://www.w3.org/2005/xpath-functions</td><td>collection</td></tr></table></div></div>&nbsp;<div id="simpleSearch" class="methoddetail"><h5><a name="simpleSearch"></a>simpleSearch</h5><ul class="method"><li class="left"><a href="javascript:litePopUp('declare function ddi:simpleSearch($search-parameters as element()) as element(){<br/&gt;    let $search-string := data($search-parameters/ssp:search-string)<br/&gt;    let $search-metadata := $search-parameters/smd:SearchMetaData<br/&gt;    let $search-scope := $search-parameters/s:Scope<br/&gt;<br/&gt;    let $studyUnitScope := if ($search-scope/s:StudyUnit) then local:queryStudyUnit($search-string) else ()<br/&gt;    let $conceptScope := if ($search-scope/s:Concept) then local:queryConcept($search-string) else ()<br/&gt;    let $universeScope := if ($search-scope/s:Universe) then local:queryUniverse($search-string) else ()<br/&gt;    let $questionScope := if ($search-scope/s:Question) then local:queryQuestion($search-string) else ()<br/&gt;    let $variableScope := if ($search-scope/s:Variable) then local:queryVariable($search-string) else ()<br/&gt;    let $categoryScope := if ($search-scope/s:Category) then local:queryCategory($search-string) else ()<br/&gt;    <br/&gt;    let $results := <br/&gt;        $studyUnitScope |<br/&gt;        $conceptScope   |<br/&gt;        $universeScope  |<br/&gt;        $questionScope  |<br/&gt;        $variableScope  |<br/&gt;        $categoryScope<br/&gt;<br/&gt;    return local:buildLightXmlObjectList($results, data($search-metadata/@hits-perpage), data($search-metadata/@hit-start))<br/&gt;};<br/&gt;')">
         view code
      </a></li><li class="right">( $search-parameters as element()) as element()<br><br></li></ul><p> Makes a free-text search in all indexed elements and returns a list of LightXmlObject elements with the results</p><ul><li>Parameters:</li><ul><li>$search-parameters - the search parameters wrapped in a SimpleSearchParameters element with the following format:  <br xmlns:xqdoc="http://www.xqdoc.org/1.0">             &lt;ssp:SimpleSearchParameters xmlns:smd="http://dda.dk/ddi/search-metadata"   <br xmlns:xqdoc="http://www.xqdoc.org/1.0">              &nbsp;&nbsp;xmlns:ssp="http://dda.dk/ddi/simple-search-parameters"   <br xmlns:xqdoc="http://www.xqdoc.org/1.0">              &nbsp;&nbsp;xmlns:s="http://dda.dk/ddi/scope"   <br xmlns:xqdoc="http://www.xqdoc.org/1.0">              &nbsp;&nbsp;xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;   <br xmlns:xqdoc="http://www.xqdoc.org/1.0">                 &nbsp;&nbsp;&nbsp;&nbsp;&lt;ssp:search-string&gt;some text&lt;/ssp:search-string&gt;  &lt;!-- The text we are searching for (xs:string). Required. --&gt;   <br xmlns:xqdoc="http://www.xqdoc.org/1.0">                 &nbsp;&nbsp;&nbsp;&nbsp;&lt;smd:SearchMetaData hits-perpage="10" hit-start="0"/&gt;   &lt;!-- The number of hits we wish to show per page (xs:positiveInteger) and the number of the first result we wish to get (xs:nonNegativeInteger). Both required. --&gt;   <br xmlns:xqdoc="http://www.xqdoc.org/1.0">                 &nbsp;&nbsp;&nbsp;&nbsp;&lt;s:Scope&gt;                                               &lt;!-- The scope of our search. Each child-element is optional and if it is present the search will return results of the type specified by that element (if found). The child-elements have no type or content; only the existence is checked. --&gt;   <br xmlns:xqdoc="http://www.xqdoc.org/1.0">                     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;s:StudyUnit/&gt;   <br xmlns:xqdoc="http://www.xqdoc.org/1.0">                     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;s:Variable/&gt;   <br xmlns:xqdoc="http://www.xqdoc.org/1.0">                     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;s:QuestionItem/&gt;   <br xmlns:xqdoc="http://www.xqdoc.org/1.0">                     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;s:MultipleQuestionItem/&gt;   <br xmlns:xqdoc="http://www.xqdoc.org/1.0">                     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;s:Universe/&gt;   <br xmlns:xqdoc="http://www.xqdoc.org/1.0">                     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;s:Concept/&gt;   <br xmlns:xqdoc="http://www.xqdoc.org/1.0">                     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;s:Category/&gt;   <br xmlns:xqdoc="http://www.xqdoc.org/1.0">                 &nbsp;&nbsp;&nbsp;&nbsp;&lt;/s:Scope&gt;   <br xmlns:xqdoc="http://www.xqdoc.org/1.0">             &lt;/ssp:SimpleSearchParameters&gt;   <br xmlns:xqdoc="http://www.xqdoc.org/1.0">     <br></li></ul></ul><div class="methoddetail"><h6>External Functions that are used by this Function</h6><table class="inexternal"><tr><th align="left">Module URI</th><th align="left">Function Name</th></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td rowspan="1">http://www.w3.org/2005/xpath-functions</td><td>data</td></tr></table></div></div>&nbsp;</div>&nbsp;<div align="left"><i>Created by xqDoc-Lite version 1.0 on Fri Dec 30 17:31:30 CET 2011</i></div></body></html>